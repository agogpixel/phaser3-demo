/*! For license information please see phaser-tilemaps.d10eb392a9c6c1fc82cc.js.LICENSE.txt */
(self.webpackChunk_agogpixel_phaser3_demo=self.webpackChunk_agogpixel_phaser3_demo||[]).push([[8047],{78757:(e,t,i)=>{var r=i(69186),l=i(46236),n=i(12063),s=new r({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(e,t){s.prototype.hasOwnProperty(e)||(s.prototype[e]=t)},s.remove=function(e){s.prototype.hasOwnProperty(e)&&delete s.prototype[e]},l.register("GameObjectCreator",s,"make"),e.exports=s},66642:(e,t,i)=>{var r=i(69186),l=i(46236),n=i(12063),s=new r({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(e,t){s.prototype.hasOwnProperty(e)||(s.prototype[e]=t)},s.remove=function(e){s.prototype.hasOwnProperty(e)&&delete s.prototype[e]},l.register("GameObjectFactory",s,"add"),e.exports=s},11747:e=>{e.exports=function(e,t){var i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e}},12174:e=>{e.exports=function(e,t,i,r){return void 0===i&&(i=0),0===t?e:(e-=i,e=t*Math.ceil(e/t),r?(i+e)/t:i+e)}},99e3:e=>{e.exports=function(e,t,i,r){return void 0===i&&(i=0),0===t?e:(e-=i,e=t*Math.floor(e/t),r?(i+e)/t:i+e)}},46236:e=>{var t={},i={},r={register:function(e,i,r,l){void 0===l&&(l=!1),t[e]={plugin:i,mapping:r,custom:l}},registerCustom:function(e,t,r,l){i[e]={plugin:t,mapping:r,data:l}},hasCore:function(e){return t.hasOwnProperty(e)},hasCustom:function(e){return i.hasOwnProperty(e)},getCore:function(e){return t[e]},getCustom:function(e){return i[e]},getCustomClass:function(e){return i.hasOwnProperty(e)?i[e].plugin:null},remove:function(e){t.hasOwnProperty(e)&&delete t[e]},removeCustom:function(e){i.hasOwnProperty(e)&&delete i[e]},destroyCorePlugins:function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]},destroyCustomPlugins:function(){for(var e in i)i.hasOwnProperty(e)&&delete i[e]}};e.exports=r},53012:e=>{e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},73476:(e,t,i)=>{var r=new(i(69186))({initialize:function(e,t,i,r,l,n,s){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===l&&(l=0),void 0===n&&(n=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|r,this.imageMargin=0|l,this.imageSpacing=0|n,this.properties=s||{},this.images=[],this.total=0},containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){return this.images.push({gid:e,image:t}),this.total++,this}});e.exports=r},5078:(e,t,i)=>{var r=i(53012),l=i(6691),n=i(37441),s=i(77960);e.exports=function(e,t,i,a,o,h,u,c){void 0===i&&(i=32),void 0===a&&(a=32),void 0===o&&(o=10),void 0===h&&(h=10),void 0===c&&(c=!1);var d=null;if(Array.isArray(u))d=n(void 0!==t?t:"map",r.ARRAY_2D,u,i,a,c);else if(void 0!==t){var f=e.cache.tilemap.get(t);f?d=n(t,f.format,f.data,i,a,c):console.warn("No map data found for key "+t)}return null===d&&(d=new l({tileWidth:i,tileHeight:a,width:o,height:h})),new s(e,d)}},3825:(e,t,i)=>{var r=i(14011),l=i(69186),n=i(19506),s=i(43550),a=new l({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(e,t,i,r,l,n,s,a){this.layer=e,this.index=t,this.x=i,this.y=r,this.width=l,this.height=n,this.right,this.bottom,this.baseWidth=void 0!==s?s:l,this.baseHeight=void 0!==a?a:n,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(e,t){return!(e<this.pixelX||t<this.pixelY||e>this.right||t>this.bottom)},copy:function(e){return this.index=e.index,this.alpha=e.alpha,this.properties=e.properties,this.visible=e.visible,this.setFlip(e.flipX,e.flipY),this.tint=e.tint,this.rotation=e.rotation,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(e){var t=this.tilemapLayer;return t?t.tileToWorldX(this.x,e):this.x*this.baseWidth},getRight:function(e){var t=this.tilemapLayer;return t?this.getLeft(e)+this.width*t.scaleX:this.getLeft(e)+this.width},getTop:function(e){var t=this.tilemapLayer;return t?t.tileToWorldY(this.y,e)-(this.height-this.baseHeight)*t.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(e){var t=this.tilemapLayer;return t?this.getTop(e)+this.height*t.scaleY:this.getTop(e)+this.height},getBounds:function(e,t){return void 0===t&&(t=new s),t.x=this.getLeft(),t.y=this.getTop(),t.width=this.getRight()-t.x,t.height=this.getBottom()-t.y,t},getCenterX:function(e){return(this.getLeft(e)+this.getRight(e))/2},getCenterY:function(e){return(this.getTop(e)+this.getBottom(e))/2},intersects:function(e,t,i,r){return!(i<=this.pixelX||r<=this.pixelY||e>=this.right||t>=this.bottom)},isInteresting:function(e,t){return e&&t?this.canCollide||this.hasInterestingFace:e?this.collides:!!t&&this.hasInterestingFace},resetCollision:function(e){return void 0===e&&(e=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,e&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(e,t,i,r,l){return void 0===t&&(t=e),void 0===i&&(i=e),void 0===r&&(r=e),void 0===l&&(l=!0),this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=r,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=r,l&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(e,t){return null===e?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=e,this.collisionCallbackContext=t),this},setSize:function(e,t,i,r){return void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.baseWidth=i),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var e=this.layer.orientation;if(e===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(e===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(e===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(e===r.HEXAGONAL){var t=this.layer.hexSideLength,i=(this.baseHeight-t)/2+t;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*i}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var e=this.layer.tilemapLayer;if(e){var t=e.gidMap[this.index];if(t)return t}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var e=this.tilemapLayer;return e?e.tilemap:null}}});e.exports=a},77960:(e,t,i)=>{var r=i(69186),l=i(23407),n=i(53012),s=i(25738),a=i(20814),o=i(14011),h=i(11747),u=i(28088),c=i(38590),d=i(3825),f=i(32257),p=i(77686),g=i(47270),y=new r({initialize:function(e,t){this.scene=e,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.width=t.width,this.height=t.height,this.orientation=t.orientation,this.renderOrder=t.renderOrder,this.format=t.format,this.version=t.version,this.properties=t.properties,this.widthInPixels=t.widthInPixels,this.heightInPixels=t.heightInPixels,this.imageCollections=t.imageCollections,this.images=t.images,this.layers=t.layers,this.tilesets=t.tilesets,this.objects=t.objects,this.currentLayerIndex=0,this.hexSideLength=t.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(i),WorldToTileX:f.GetWorldToTileXFunction(i),WorldToTileY:f.GetWorldToTileYFunction(i),TileToWorldXY:f.GetTileToWorldXYFunction(i),TileToWorldX:f.GetTileToWorldXFunction(i),TileToWorldY:f.GetTileToWorldYFunction(i)}},createBlankDynamicLayer:function(e,t,i,r,l,n,s,a){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(e,t,i,r,l,n,s,a)},createDynamicLayer:function(e,t,i,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(e,t,i,r)},createStaticLayer:function(e,t,i,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(e,t,i,r)},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];return"number"==typeof e&&(e=t[e]),t.indexOf(e)>-1&&(this.renderOrder=e),this},addTilesetImage:function(e,t,i,r,l,s,a){if(void 0===e)return null;if(null==t&&(t=e),!this.scene.sys.textures.exists(t))return console.warn("Invalid Tileset Image: "+t),null;var o=this.scene.sys.textures.get(t),h=this.getTilesetIndex(e);if(null===h&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+e),null;var u=this.tilesets[h];return u?(u.setTileSize(i,r),u.setSpacing(l,s),u.setImage(o),u):(void 0===i&&(i=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===l&&(l=0),void 0===s&&(s=0),void 0===a&&(a=0),(u=new g(e,a,i,r,l,s)).setImage(o),this.tilesets.push(u),u)},copy:function(e,t,i,r,l,n,s,a){return null!==(a=this.getLayer(a))?(f.Copy(e,t,i,r,l,n,s,a),this):null},createBlankLayer:function(e,t,i,r,l,n,s,o){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===l&&(l=this.width),void 0===n&&(n=this.height),void 0===s&&(s=this.tileWidth),void 0===o&&(o=this.tileHeight),null!==this.getLayerIndex(e))return console.warn("Invalid Tilemap Layer ID: "+e),null;for(var h,u=new a({name:e,tileWidth:s,tileHeight:o,width:l,height:n,orientation:this.orientation}),c=0;c<n;c++){h=[];for(var f=0;f<l;f++)h.push(new d(u,-1,f,c,s,o,this.tileWidth,this.tileHeight));u.data.push(h)}this.layers.push(u),this.currentLayerIndex=this.layers.length-1;var g=new p(this.scene,this,this.currentLayerIndex,t,i,r);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createLayer:function(e,t,i,r){var l=this.getLayerIndex(e);if(null===l)return console.warn("Invalid Tilemap Layer ID: "+e),"string"==typeof e&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var n=this.layers[l];if(n.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+e),null;this.currentLayerIndex=l,void 0===i&&(i=n.x),void 0===r&&(r=n.y);var s=new p(this.scene,this,l,t,i,r);return s.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(s),s},createFromObjects:function(e,t){var i=[],r=this.getObjectLayer(e);if(!r)return console.warn("createFromObjects: Invalid objectLayerName given: "+e),i;Array.isArray(t)||(t=[t]);for(var n=r.objects,a=0;a<t.length;a++){for(var o,u=t[a],d=s(u,"id",null),f=s(u,"gid",null),p=s(u,"name",null),g=[],y=0;y<n.length;y++)o=n[y],(null===d&&null===f&&null===p||null!==d&&o.id===d||null!==f&&o.gid===f||null!==p&&o.name===p)&&g.push(o);for(var v=s(u,"classType",c),x=s(u,"scene",this.scene),m=s(u,"container",null),T=s(u,"key",null),w=s(u,"frame",null),L=0;L<g.length;L++){o=g[L];var b=new v(x);b.setName(o.name),b.setPosition(o.x,o.y),b.setTexture(T,w),o.width&&(b.displayWidth=o.width),o.height&&(b.displayHeight=o.height);var W={x:b.originX*o.width,y:(b.originY-1)*o.height};if(o.rotation){var C=l(o.rotation);h(W,C),b.rotation=C}if(b.x+=W.x,b.y+=W.y,void 0===o.flippedHorizontal&&void 0===o.flippedVertical||b.setFlip(o.flippedHorizontal,o.flippedVertical),o.visible||(b.visible=!1),Array.isArray(o.properties))o.properties.forEach((function(e){var t=e.name;void 0!==b[t]?b[t]=e.value:b.setData(t,e.value)}));else for(var A in o.properties)void 0!==b[A]?b[A]=o.properties[A]:b.setData(A,o.properties[A]);m?m.add(b):x.add.existing(b),i.push(b)}}return i},createFromTiles:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:f.CreateFromTiles(e,t,i,r,l,n)},fill:function(e,t,i,r,l,n,s){return void 0===n&&(n=!0),null===(s=this.getLayer(s))?null:(f.Fill(e,t,i,r,l,n,s),this)},filterObjects:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.filter(t,i)},filterTiles:function(e,t,i,r,l,n,s,a){return null===(a=this.getLayer(a))?null:f.FilterTiles(e,t,i,r,l,n,s,a)},findByIndex:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.FindByIndex(e,t,i,r)},findObject:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.find(t,i)||null},findTile:function(e,t,i,r,l,n,s,a){return null===(a=this.getLayer(a))?null:f.FindTile(e,t,i,r,l,n,s,a)},forEachTile:function(e,t,i,r,l,n,s,a){return null===(a=this.getLayer(a))?null:(f.ForEachTile(e,t,i,r,l,n,s,a),this)},getImageIndex:function(e){return this.getIndex(this.images,e)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(e){return e.name})):[]},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayer:function(e){var t=this.getLayerIndex(e);return null!==t?this.layers[t]:null},getObjectLayer:function(e){var t=this.getIndex(this.objects,e);return null!==t?this.objects[t]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(e){return e.name})):[]},getLayerIndex:function(e){return void 0===e?this.currentLayerIndex:"string"==typeof e?this.getLayerIndexByName(e):"number"==typeof e&&e<this.layers.length?e:e instanceof p?e.layerIndex:null},getLayerIndexByName:function(e){return this.getIndex(this.layers,e)},getTileAt:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.GetTileAt(e,t,i,r)},getTileAtWorldXY:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:f.GetTileAtWorldXY(e,t,i,r,l)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(e){return e.name})):[]},getTilesWithin:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:f.GetTilesWithin(e,t,i,r,l,n)},getTilesWithinShape:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.GetTilesWithinShape(e,t,i,r)},getTilesWithinWorldXY:function(e,t,i,r,l,n,s){return null===(s=this.getLayer(s))?null:f.GetTilesWithinWorldXY(e,t,i,r,l,n,s)},getTileset:function(e){var t=this.getIndex(this.tilesets,e);return null!==t?this.tilesets[t]:null},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},hasTileAt:function(e,t,i){return null===(i=this.getLayer(i))?null:f.HasTileAt(e,t,i)},hasTileAtWorldXY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:f.HasTileAtWorldXY(e,t,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(e){this.setLayer(e)}},putTileAt:function(e,t,i,r,l){return void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:f.PutTileAt(e,t,i,r,l)},putTileAtWorldXY:function(e,t,i,r,l,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.PutTileAtWorldXY(e,t,i,r,l,n)},putTilesAt:function(e,t,i,r,l){return void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:(f.PutTilesAt(e,t,i,r,l),this)},randomize:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:(f.Randomize(e,t,i,r,l,n),this)},calculateFacesAt:function(e,t,i){return null===(i=this.getLayer(i))?null:(f.CalculateFacesAt(e,t,i),this)},calculateFacesWithin:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:(f.CalculateFacesWithin(e,t,i,r,l),this)},removeLayer:function(e){var t=this.getLayerIndex(e);if(null!==t){u(this.layers,t);for(var i=t;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===t&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(e){var t=this.getLayerIndex(e);return null!==t?((e=this.layers[t]).destroy(),u(this.layers,t),this.currentLayerIndex===t&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var e=this.layers,t=0;t<e.length;t++)e[t].tilemapLayer&&e[t].tilemapLayer.destroy(!1);return e.length=0,this.currentLayerIndex=0,this},removeTile:function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=!0);var r=[];Array.isArray(e)||(e=[e]);for(var l=0;l<e.length;l++){var n=e[l];r.push(this.removeTileAt(n.x,n.y,!0,i,n.tilemapLayer)),t>-1&&this.putTileAt(t,n.x,n.y,i,n.tilemapLayer)}return r},removeTileAt:function(e,t,i,r,l){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:f.RemoveTileAt(e,t,i,r,l)},removeTileAtWorldXY:function(e,t,i,r,l,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.RemoveTileAtWorldXY(e,t,i,r,l,n)},renderDebug:function(e,t,i){return null===(i=this.getLayer(i))?null:(this.orientation===o.ORTHOGONAL&&f.RenderDebug(e,t,i),this)},renderDebugFull:function(e,t){for(var i=this.layers,r=0;r<i.length;r++)f.RenderDebug(e,t,i[r]);return this},replaceByIndex:function(e,t,i,r,l,n,s){return null===(s=this.getLayer(s))?null:(f.ReplaceByIndex(e,t,i,r,l,n,s),this)},setCollision:function(e,t,i,r,l){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===l&&(l=!0),null===(r=this.getLayer(r))?null:(f.SetCollision(e,t,i,r,l),this)},setCollisionBetween:function(e,t,i,r,l){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:(f.SetCollisionBetween(e,t,i,r,l),this)},setCollisionByProperty:function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByProperty(e,t,i,r),this)},setCollisionByExclusion:function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByExclusion(e,t,i,r),this)},setCollisionFromCollisionGroup:function(e,t,i){return void 0===e&&(e=!0),void 0===t&&(t=!0),null===(i=this.getLayer(i))?null:(f.SetCollisionFromCollisionGroup(e,t,i),this)},setTileIndexCallback:function(e,t,i,r){return null===(r=this.getLayer(r))?null:(f.SetTileIndexCallback(e,t,i,r),this)},setTileLocationCallback:function(e,t,i,r,l,n,s){return null===(s=this.getLayer(s))?null:(f.SetTileLocationCallback(e,t,i,r,l,n,s),this)},setLayer:function(e){var t=this.getLayerIndex(e);return null!==t&&(this.currentLayerIndex=t),this},setBaseTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=e,this.layers[i].baseTileHeight=t;for(var r=this.layers[i].data,l=this.layers[i].width,n=this.layers[i].height,s=0;s<n;s++)for(var a=0;a<l;a++){var o=r[s][a];null!==o&&o.setSize(void 0,void 0,e,t)}}return this},setLayerTileSize:function(e,t,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=e,i.tileHeight=t;for(var r=i.data,l=i.width,n=i.height,s=0;s<n;s++)for(var a=0;a<l;a++){var o=r[s][a];null!==o&&o.setSize(e,t)}return this},shuffle:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:(f.Shuffle(e,t,i,r,l),this)},swapByIndex:function(e,t,i,r,l,n,s){return null===(s=this.getLayer(s))?null:(f.SwapByIndex(e,t,i,r,l,n,s),this)},tileToWorldX:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(e,t,i)},tileToWorldY:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(e,t,i)},tileToWorldXY:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:this._convert.TileToWorldXY(e,t,i,r,l)},weightedRandomize:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:(f.WeightedRandomize(t,i,r,l,e,n),this)},worldToTileX:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(e,t,i,r)},worldToTileY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(e,t,i,r)},worldToTileXY:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:this._convert.WorldToTileXY(e,t,i,r,l,n)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=y},11328:(e,t,i)=>{var r=i(78757),l=i(5078);r.register("tilemap",(function(e){var t=void 0!==e?e:{};return l(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)}))},81004:(e,t,i)=>{var r=i(66642),l=i(5078);r.register("tilemap",(function(e,t,i,r,n,s,a){return null===e&&(e=void 0),null===t&&(t=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===n&&(n=void 0),l(this.scene,e,t,i,r,n,s,a)}))},77686:(e,t,i)=>{var r=i(69186),l=i(19506),n=i(38236),s=i(32257),a=i(56996),o=new r({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Depth,l.Flip,l.GetBounds,l.Origin,l.Pipeline,l.Transform,l.Visible,l.ScrollFactor,a],initialize:function(e,t,i,r,l,a){n.call(this,e,"TilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=i,this.layer=t.layers[i],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=s.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(l,a),this.setOrigin(),this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(e){var t=[],i=[],r=this.tilemap;Array.isArray(e)||(e=[e]);for(var l=0;l<e.length;l++){var n=e[l];if("string"==typeof n&&(n=r.getTileset(n)),n){i.push(n);for(var s=n.firstgid,a=0;a<n.total;a++)t[s+a]=n}}this.gidMap=t,this.tileset=i},setRenderOrder:function(e){return"string"==typeof e&&(e=["right-down","left-down","right-up","left-up"].indexOf(e)),e>=0&&e<4&&(this._renderOrder=e),this},calculateFacesAt:function(e,t){return s.CalculateFacesAt(e,t,this.layer),this},calculateFacesWithin:function(e,t,i,r){return s.CalculateFacesWithin(e,t,i,r,this.layer),this},createFromTiles:function(e,t,i,r,l){return s.CreateFromTiles(e,t,i,r,l,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles,this._renderOrder)},copy:function(e,t,i,r,l,n,a){return s.Copy(e,t,i,r,l,n,a,this.layer),this},fill:function(e,t,i,r,l,n){return s.Fill(e,t,i,r,l,n,this.layer),this},filterTiles:function(e,t,i,r,l,n,a){return s.FilterTiles(e,t,i,r,l,n,a,this.layer)},findByIndex:function(e,t,i){return s.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,l,n,a){return s.FindTile(e,t,i,r,l,n,a,this.layer)},forEachTile:function(e,t,i,r,l,n,a){return s.ForEachTile(e,t,i,r,l,n,a,this.layer),this},getTileAt:function(e,t,i){return s.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return s.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,l){return s.GetTilesWithin(e,t,i,r,l,this.layer)},getTilesWithinShape:function(e,t,i){return s.GetTilesWithinShape(e,t,i,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,l,n){return s.GetTilesWithinWorldXY(e,t,i,r,l,n,this.layer)},hasTileAt:function(e,t){return s.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return s.HasTileAtWorldXY(e,t,i,this.layer)},putTileAt:function(e,t,i,r){return s.PutTileAt(e,t,i,r,this.layer)},putTileAtWorldXY:function(e,t,i,r,l){return s.PutTileAtWorldXY(e,t,i,r,l,this.layer)},putTilesAt:function(e,t,i,r){return s.PutTilesAt(e,t,i,r,this.layer),this},randomize:function(e,t,i,r,l){return s.Randomize(e,t,i,r,l,this.layer),this},removeTileAt:function(e,t,i,r){return s.RemoveTileAt(e,t,i,r,this.layer)},removeTileAtWorldXY:function(e,t,i,r,l){return s.RemoveTileAtWorldXY(e,t,i,r,l,this.layer)},renderDebug:function(e,t){return s.RenderDebug(e,t,this.layer),this},replaceByIndex:function(e,t,i,r,l,n){return s.ReplaceByIndex(e,t,i,r,l,n,this.layer),this},setSkipCull:function(e){return void 0===e&&(e=!0),this.skipCull=e,this},setCullPadding:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1),this.cullPaddingX=e,this.cullPaddingY=t,this},setCollision:function(e,t,i,r){return s.SetCollision(e,t,i,this.layer,r),this},setCollisionBetween:function(e,t,i,r){return s.SetCollisionBetween(e,t,i,r,this.layer),this},setCollisionByProperty:function(e,t,i){return s.SetCollisionByProperty(e,t,i,this.layer),this},setCollisionByExclusion:function(e,t,i){return s.SetCollisionByExclusion(e,t,i,this.layer),this},setCollisionFromCollisionGroup:function(e,t){return s.SetCollisionFromCollisionGroup(e,t,this.layer),this},setTileIndexCallback:function(e,t,i){return s.SetTileIndexCallback(e,t,i,this.layer),this},setTileLocationCallback:function(e,t,i,r,l,n){return s.SetTileLocationCallback(e,t,i,r,l,n,this.layer),this},shuffle:function(e,t,i,r){return s.Shuffle(e,t,i,r,this.layer),this},swapByIndex:function(e,t,i,r,l,n){return s.SwapByIndex(e,t,i,r,l,n,this.layer),this},tileToWorldX:function(e,t){return this.tilemap.tileToWorldX(e,t,this)},tileToWorldY:function(e,t){return this.tilemap.tileToWorldY(e,t,this)},tileToWorldXY:function(e,t,i,r){return this.tilemap.tileToWorldXY(e,t,i,r,this)},weightedRandomize:function(e,t,i,r,l){return s.WeightedRandomize(t,i,r,l,e,this.layer),this},worldToTileX:function(e,t,i){return this.tilemap.worldToTileX(e,t,i,this)},worldToTileY:function(e,t,i){return this.tilemap.worldToTileY(e,t,i,this)},worldToTileXY:function(e,t,i,r,l){return this.tilemap.worldToTileXY(e,t,i,r,l,this)},destroy:function(e){void 0===e&&(e=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),e&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});e.exports=o},19814:(e,t,i)=>{var r=i(9329),l=new r,n=new r,s=new r;e.exports=function(e,t,i,r){var a=t.cull(i),o=a.length,h=i.alpha*t.alpha;if(!(0===o||h<=0)){var u=l,c=n,d=s;c.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),u.copyFrom(i.matrix);var f=e.currentContext,p=t.gidMap;f.save(),r?(u.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),c.e=t.x,c.f=t.y,u.multiply(c,d),d.copyToContext(f)):(c.e-=i.scrollX*t.scrollFactorX,c.f-=i.scrollY*t.scrollFactorY,c.copyToContext(f)),(!e.antialias||t.scaleX>1||t.scaleY>1)&&(f.imageSmoothingEnabled=!1);for(var g=0;g<o;g++){var y=a[g],v=p[y.index];if(v){var x=v.image.getSourceImage(),m=v.getTileTextureCoordinates(y.index);if(null!==m){var T=v.tileWidth,w=v.tileHeight,L=.5*T,b=.5*w;f.save(),f.translate(y.pixelX+L,y.pixelY+b),0!==y.rotation&&f.rotate(y.rotation),(y.flipX||y.flipY)&&f.scale(y.flipX?-1:1,y.flipY?-1:1),f.globalAlpha=h*y.alpha,f.drawImage(x,m.x,m.y,T,w,-L,-b,T,w),f.restore()}}}f.restore()}}},56996:(e,t,i)=>{var r=i(45733),l=i(45733);r=i(30744),l=i(19814),e.exports={renderWebGL:r,renderCanvas:l}},30744:(e,t,i)=>{var r=i(64564);e.exports=function(e,t,i){var l=t.cull(i),n=l.length,s=i.alpha*t.alpha;if(!(0===n||s<=0)){var a=t.gidMap,o=e.pipelines.set(t.pipeline,t),h=r.getTintAppendFloatAlpha,u=t.scrollFactorX,c=t.scrollFactorY,d=t.x,f=t.y,p=t.scaleX,g=t.scaleY;e.pipelines.preBatch(t);for(var y=0;y<n;y++){var v=l[y],x=a[v.index];if(x){var m=x.getTileTextureCoordinates(v.index);if(null!==m){var T=x.glTexture,w=o.setTexture2D(T,t),L=x.tileWidth,b=x.tileHeight,W=m.x,C=m.y,A=.5*x.tileWidth,Y=.5*x.tileHeight,X=h(v.tint,s*v.alpha);o.batchTexture(t,T,T.width,T.height,d+(A+v.pixelX)*p,f+(Y+v.pixelY)*g,v.width,v.height,p,g,v.rotation,v.flipX,v.flipY,u,c,A,Y,W,C,L,b,X,X,X,X,!1,0,0,i,null,!0,w)}}}e.pipelines.postBatch(t)}}},47270:(e,t,i)=>{var r=new(i(69186))({initialize:function(e,t,i,r,l,n,s,a){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===l&&(l=0),void 0===n&&(n=0),void 0===s&&(s={}),void 0===a&&(a={}),this.name=e,this.firstgid=t,this.tileWidth=i,this.tileHeight=r,this.tileMargin=l,this.tileSpacing=n,this.tileProperties=s,this.tileData=a,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(e){return this.containsTileIndex(e)?this.tileProperties[e-this.firstgid]:null},getTileData:function(e){return this.containsTileIndex(e)?this.tileData[e-this.firstgid]:null},getTileCollisionGroup:function(e){var t=this.getTileData(e);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},getTileTextureCoordinates:function(e){return this.containsTileIndex(e)?this.texCoordinates[e-this.firstgid]:null},setImage:function(e){return this.image=e,this.glTexture=e.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(e,t){return void 0!==e&&(this.tileWidth=e),void 0!==t&&(this.tileHeight=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(e,t){return void 0!==e&&(this.tileMargin=e),void 0!==t&&(this.tileSpacing=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),r=Math.floor(r),this.rows=i,this.columns=r,this.total=i*r,this.texCoordinates.length=0;for(var l=this.tileMargin,n=this.tileMargin,s=0;s<this.rows;s++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:l,y:n}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin,n+=this.tileHeight+this.tileSpacing}return this}});e.exports=r},500:(e,t,i)=>{var r=i(15921);e.exports=function(e,t,i){var l=r(e,t,!0,i),n=r(e,t-1,!0,i),s=r(e,t+1,!0,i),a=r(e-1,t,!0,i),o=r(e+1,t,!0,i),h=l&&l.collides;return h&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),n&&n.collides&&(h&&(l.faceTop=!1),n.faceBottom=!h),s&&s.collides&&(h&&(l.faceBottom=!1),s.faceTop=!h),a&&a.collides&&(h&&(l.faceLeft=!1),a.faceRight=!h),o&&o.collides&&(h&&(l.faceRight=!1),o.faceLeft=!h),l&&!l.collides&&l.resetFaces(),l}},22122:(e,t,i)=>{var r=i(15921),l=i(98767);e.exports=function(e,t,i,n,s){for(var a=null,o=null,h=null,u=null,c=l(e,t,i,n,null,s),d=0;d<c.length;d++){var f=c[d];f&&(f.collides?(a=r(f.x,f.y-1,!0,s),o=r(f.x,f.y+1,!0,s),h=r(f.x-1,f.y,!0,s),u=r(f.x+1,f.y,!0,s),f.faceTop=!a||!a.collides,f.faceBottom=!o||!o.collides,f.faceLeft=!h||!h.collides,f.faceRight=!u||!u.collides):f.resetFaces())}}},32615:(e,t,i)=>{var r=new(i(17321));e.exports=function(e,t,i,l){var n=i.tilemapLayer,s=n.cullPaddingX,a=n.cullPaddingY,o=n.tilemap.tileToWorldXY(e,t,r,l,n);return o.x>l.worldView.x+n.scaleX*i.tileWidth*(-s-.5)&&o.x<l.worldView.right+n.scaleX*i.tileWidth*(s-.5)&&o.y>l.worldView.y+n.scaleY*i.tileHeight*(-a-1)&&o.y<l.worldView.bottom+n.scaleY*i.tileHeight*(a-.5)}},35432:(e,t,i)=>{var r=i(98767),l=i(22122);e.exports=function(e,t,i,n,s,a,o,h){void 0===o&&(o=!0),e<0&&(e=0),t<0&&(t=0);for(var u=r(e,t,i,n,null,h),c=s-e,d=a-t,f=0;f<u.length;f++){var p=u[f].x+c,g=u[f].y+d;p>=0&&p<h.width&&g>=0&&g<h.height&&h.data[g][p]&&h.data[g][p].copy(u[f])}o&&l(s-1,a-1,i+2,n+2,h)}},94916:(e,t,i)=>{var r=i(98767),l=i(44641);e.exports=function(e,t,i,n,s,a){i||(i={}),Array.isArray(e)||(e=[e]);var o=a.tilemapLayer;n||(n=o.scene),s||(s=n.cameras.main);var h,u=r(0,0,a.width,a.height,null,a),c=[];for(h=0;h<u.length;h++){var d=u[h];if(-1!==e.indexOf(d.index)){var f=o.tileToWorldXY(d.x,d.y,void 0,s,a);i.x=f.x,i.y=f.y,c.push(n.make.sprite(i))}}if("number"==typeof t)for(h=0;h<e.length;h++)l(e[h],t,0,0,a.width,a.height,a);else if(Array.isArray(t))for(h=0;h<e.length;h++)l(e[h],t[h],0,0,a.width,a.height,a);return c}},65234:(e,t,i)=>{var r=i(75380),l=i(12174),n=i(99e3),s=new r;e.exports=function(e,t){var i=e.tilemapLayer.tilemap,r=e.tilemapLayer,a=Math.floor(i.tileWidth*r.scaleX),o=Math.floor(i.tileHeight*r.scaleY),h=n(t.worldView.x-r.x,a,0,!0)-r.cullPaddingX,u=l(t.worldView.right-r.x,a,0,!0)+r.cullPaddingX,c=n(t.worldView.y-r.y,o,0,!0)-r.cullPaddingY,d=l(t.worldView.bottom-r.y,o,0,!0)+r.cullPaddingY;return s.setTo(h,c,u-h,d-c)}},65479:(e,t,i)=>{var r=i(65234),l=i(55645);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var s=e.tilemapLayer,a=r(e,t);return(s.skipCull||1!==s.scrollFactorX||1!==s.scrollFactorY)&&(a.left=0,a.right=e.width,a.top=0,a.bottom=e.height),l(e,a,n,i),i}},22619:(e,t,i)=>{var r=i(98767),l=i(22122),n=i(35031);e.exports=function(e,t,i,s,a,o,h){for(var u=-1!==h.collideIndexes.indexOf(e),c=r(t,i,s,a,null,h),d=0;d<c.length;d++)c[d].index=e,n(c[d],u);o&&l(t-1,i-1,s+2,a+2,h)}},34254:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s,a,o){return r(i,l,n,s,a,o).filter(e,t)}},71198:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=!1);var l,n,s,a=0;if(i){for(n=r.height-1;n>=0;n--)for(l=r.width-1;l>=0;l--)if((s=r.data[n][l])&&s.index===e){if(a===t)return s;a+=1}}else for(n=0;n<r.height;n++)for(l=0;l<r.width;l++)if((s=r.data[n][l])&&s.index===e){if(a===t)return s;a+=1}return null}},87555:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s,a,o){return r(i,l,n,s,a,o).find(e,t)||null}},30127:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s,a,o){r(i,l,n,s,a,o).forEach(e,t)}},69447:(e,t,i)=>{var r=i(14011),l=i(65479),n=i(5802),s=i(14879),a=i(45733),o=i(46341);e.exports=function(e){return e===r.ORTHOGONAL?l:e===r.HEXAGONAL?n:e===r.STAGGERED?o:e===r.ISOMETRIC?s:a}},15921:(e,t,i)=>{var r=i(48339);e.exports=function(e,t,i,l){if(void 0===i&&(i=!1),r(e,t,l)){var n=l.data[t][e]||null;return n?-1===n.index?i?n:null:n:null}return null}},16304:(e,t,i)=>{var r=i(15921),l=new(i(17321));e.exports=function(e,t,i,n,s){return s.tilemapLayer.worldToTileXY(e,t,!0,l,n),r(l.x,l.y,i,s)}},10858:(e,t,i)=>{var r=i(14011),l=i(45733),n=i(80391);e.exports=function(e){return e===r.ORTHOGONAL?n:l}},59363:(e,t,i)=>{var r=i(14011),l=i(56645),n=i(19462),s=i(45733),a=i(16407),o=i(29938);e.exports=function(e){return e===r.ORTHOGONAL?o:e===r.ISOMETRIC?n:e===r.HEXAGONAL?l:e===r.STAGGERED?a:s}},83277:(e,t,i)=>{var r=i(14011),l=i(96542),n=i(45733),s=i(89485),a=i(56775);e.exports=function(e){return e===r.ORTHOGONAL?a:e===r.HEXAGONAL?l:e===r.STAGGERED?s:n}},98767:(e,t,i)=>{var r=i(25738);e.exports=function(e,t,i,l,n,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=s.width),void 0===l&&(l=s.height),n||(n={});var a=r(n,"isNotEmpty",!1),o=r(n,"isColliding",!1),h=r(n,"hasInterestingFace",!1);e<0&&(i+=e,e=0),t<0&&(l+=t,t=0),e+i>s.width&&(i=Math.max(s.width-e,0)),t+l>s.height&&(l=Math.max(s.height-t,0));for(var u=[],c=t;c<t+l;c++)for(var d=e;d<e+i;d++){var f=s.data[c][d];if(null!==f){if(a&&-1===f.index)continue;if(o&&!f.collides)continue;if(h&&!f.hasInterestingFace)continue;u.push(f)}}return u}},13091:(e,t,i)=>{var r=i(67449),l=i(98767),n=i(33408),s=i(45733),a=i(17321),o=function(e,t){return n.RectangleToTriangle(t,e)},h=new a,u=new a,c=new a;e.exports=function(e,t,i,a){if(void 0===e)return[];var d=s;e instanceof r.Circle?d=n.CircleToRectangle:e instanceof r.Rectangle?d=n.RectangleToRectangle:e instanceof r.Triangle?d=o:e instanceof r.Line&&(d=n.LineToRectangle),a.tilemapLayer.worldToTileXY(e.left,e.top,!0,u,i);var f=u.x,p=u.y;a.tilemapLayer.worldToTileXY(e.right,e.bottom,!0,c,i);var g=Math.ceil(c.x),y=Math.ceil(c.y),v=Math.max(g-f,1),x=Math.max(y-p,1),m=l(f,p,v,x,t,a),T=a.tileWidth,w=a.tileHeight;a.tilemapLayer&&(T*=a.tilemapLayer.scaleX,w*=a.tilemapLayer.scaleY);for(var L=[],b=new r.Rectangle(0,0,T,w),W=0;W<m.length;W++){var C=m[W];a.tilemapLayer.tileToWorldXY(C.x,C.y,h,i),b.x=h.x,b.y=h.y,d(e,b)&&L.push(C)}return L}},79247:(e,t,i)=>{var r=i(98767),l=i(17321),n=new l,s=new l;e.exports=function(e,t,i,l,a,o,h){var u=h.tilemapLayer.tilemap._convert.WorldToTileXY;u(e,t,!0,n,o,h);var c=n.x,d=n.y;u(e+i,t+l,!1,s,o,h);var f=Math.ceil(s.x),p=Math.ceil(s.y);return r(c,d,f-c,p-d,a,h)}},54343:(e,t,i)=>{var r=i(14011),l=i(45733),n=i(78899);e.exports=function(e){return e===r.ORTHOGONAL?n:l}},53813:(e,t,i)=>{var r=i(14011),l=i(1917),n=i(25901),s=i(45733),a=i(89098),o=i(99916);e.exports=function(e){return e===r.ORTHOGONAL?o:e===r.ISOMETRIC?n:e===r.HEXAGONAL?l:e===r.STAGGERED?a:s}},30833:(e,t,i)=>{var r=i(14011),l=i(89055),n=i(45733),s=i(95608),a=i(87472);e.exports=function(e){return e===r.ORTHOGONAL?a:e===r.HEXAGONAL?l:e===r.STAGGERED?s:n}},5253:(e,t,i)=>{var r=i(48339);e.exports=function(e,t,i){if(r(e,t,i)){var l=i.data[t][e];return null!==l&&l.index>-1}return!1}},72502:(e,t,i)=>{var r=i(5253),l=new(i(17321));e.exports=function(e,t,i,n){n.tilemapLayer.worldToTileXY(e,t,!0,l,i);var s=l.x,a=l.y;return r(s,a,n)}},96921:(e,t,i)=>{var r=i(12174),l=i(99e3);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,n=e.tilemapLayer,s=Math.floor(i.tileWidth*n.scaleX),a=Math.floor(i.tileHeight*n.scaleY),o=e.hexSideLength,h=(a-o)/2+o;return{left:l(t.worldView.x-n.x,s,0,!0)-n.cullPaddingX,right:r(t.worldView.right-n.x,s,0,!0)+n.cullPaddingX,top:l(t.worldView.y-n.y,h,0,!0)-n.cullPaddingY,bottom:r(t.worldView.bottom-n.y,h,0,!0)+n.cullPaddingY}}},5802:(e,t,i)=>{var r=i(96921),l=i(55645);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var s=e.tilemapLayer;if(!s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY){var a=r(e,t);l(e,a,n,i)}return i}},56645:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n){i||(i=new r);var s=n.baseTileWidth,a=n.baseTileHeight,o=n.tilemapLayer,h=0,u=0;o&&(l||(l=o.scene.cameras.main),h=o.x+l.scrollX*(1-o.scrollFactorX),s*=o.scaleX,u=o.y+l.scrollY*(1-o.scrollFactorY),a*=o.scaleY);var c=n.hexSideLength,d=h+e*s+t%2*(s/2),f=u+t*((a-c)/2+c);return i.set(d,f)}},96542:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,l=i.tilemapLayer,n=0;l&&(void 0===t&&(t=l.scene.cameras.main),n=l.y+t.scrollY*(1-l.scrollFactorY),r*=l.scaleY);var s=l.tilemap.hexSideLength;return n+e*((r-s)/2+s)}},1917:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n,s){l||(l=new r);var a=s.baseTileWidth,o=s.baseTileHeight,h=s.tilemapLayer;h&&(n||(n=h.scene.cameras.main),t-=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY,e-=h.x+n.scrollX*(1-h.scrollFactorX),a*=h.scaleX);var u=s.hexSideLength,c=(o-u)/2+u,d=i?Math.floor(t/c):t/c,f=i?Math.floor((e-d%2*.5*a)/a):(e-d%2*.5*a)/a;return l.set(f,d)}},89055:e=>{e.exports=function(e,t,i,r){var l=r.baseTileHeight,n=r.tilemapLayer;n&&(i||(i=n.scene.cameras.main),e-=n.y+i.scrollY*(1-n.scrollFactorY),l*=n.scaleY);var s=r.hexSideLength,a=(l-s)/2+s;return t?Math.floor(e/a):e/a}},48339:e=>{e.exports=function(e,t,i){return e>=0&&e<i.width&&t>=0&&t<i.height}},14879:(e,t,i)=>{var r=i(32615);e.exports=function(e,t,i,l){void 0===i&&(i=[]),void 0===l&&(l=0),i.length=0;var n,s,a,o=e.tilemapLayer,h=e.data,u=e.width,c=e.height,d=u,f=c;if(!o.skipCull)if(0===l){for(s=0;s<f;s++)for(n=0;h[s]&&n<d;n++)if(r(n,s,e,t)){if(!(a=h[s][n])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(1===l){for(s=0;s<f;s++)for(n=d;h[s]&&n>=0;n--)if(r(n,s,e,t)){if(!(a=h[s][n])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(2===l){for(s=f;s>=0;s--)for(n=0;h[s]&&n<d;n++)if(r(n,s,e,t)){if(!(a=h[s][n])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(3===l)for(s=f;s>=0;s--)for(n=d;h[s]&&n>=0;n--)if(r(n,s,e,t)){if(!(a=h[s][n])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}return o.tilesDrawn=i.length,o.tilesTotal=u*c,i}},19462:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n){i||(i=new r);var s=n.baseTileWidth,a=n.baseTileHeight,o=n.tilemapLayer,h=0,u=0;o&&(l||(l=o.scene.cameras.main),h=o.x+l.scrollX*(1-o.scrollFactorX),s*=o.scaleX,u=o.y+l.scrollY*(1-o.scrollFactorY),a*=o.scaleY);var c=h+s/2*(e-t),d=u+(e+t)*(a/2);return i.set(c,d)}},25901:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n,s){l||(l=new r);var a=s.baseTileWidth,o=s.baseTileHeight,h=s.tilemapLayer;h&&(n||(n=h.scene.cameras.main),t-=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY,e-=h.x+n.scrollX*(1-h.scrollFactorX),a*=h.scaleX);var u=i?Math.floor((e/(a/2)+t/(o/2))/2):(e/(a/2)+t/(o/2))/2,c=i?Math.floor((t/(o/2)-e/(a/2))/2):(t/(o/2)-e/(a/2))/2;return l.set(u,c)}},9749:(e,t,i)=>{var r=i(3825),l=i(48339),n=i(500),s=i(35031);e.exports=function(e,t,i,a,o){if(void 0===a&&(a=!0),!l(t,i,o))return null;var h=o.data[i][t],u=h&&h.collides;if(e instanceof r)null===o.data[i][t]&&(o.data[i][t]=new r(o,e.index,t,i,o.tileWidth,o.tileHeight)),o.data[i][t].copy(e);else{var c=e;null===o.data[i][t]?o.data[i][t]=new r(o,c,t,i,o.tileWidth,o.tileHeight):o.data[i][t].index=c}var d=o.data[i][t],f=-1!==o.collideIndexes.indexOf(d.index);return s(d,f),a&&u!==d.collides&&n(t,i,o),d}},10543:(e,t,i)=>{var r=i(9749),l=new(i(17321));e.exports=function(e,t,i,n,s,a){return a.tilemapLayer.worldToTileXY(t,i,!0,l,s,a),r(e,l.x,l.y,n,a)}},47663:(e,t,i)=>{var r=i(22122),l=i(9749);e.exports=function(e,t,i,n,s){if(void 0===n&&(n=!0),!Array.isArray(e))return null;Array.isArray(e[0])||(e=[e]);for(var a=e.length,o=e[0].length,h=0;h<a;h++)for(var u=0;u<o;u++){var c=e[h][u];l(c,t+u,i+h,!1,s)}n&&r(t-1,i-1,o+2,a+2,s)}},18396:(e,t,i)=>{var r=i(98767),l=i(88829);e.exports=function(e,t,i,n,s,a){var o,h=r(e,t,i,n,{},a);if(!s)for(s=[],o=0;o<h.length;o++)-1===s.indexOf(h[o].index)&&s.push(h[o].index);for(o=0;o<h.length;o++)h[o].index=l(s)}},73019:(e,t,i)=>{var r=i(3825),l=i(48339),n=i(500);e.exports=function(e,t,i,s,a){if(void 0===i&&(i=!0),void 0===s&&(s=!0),!l(e,t,a))return null;var o=a.data[t][e];return o?(a.data[t][e]=i?null:new r(a,-1,e,t,a.tileWidth,a.tileHeight),s&&o&&o.collides&&n(e,t,a),o):null}},47216:(e,t,i)=>{var r=i(73019),l=new(i(17321));e.exports=function(e,t,i,n,s,a){return a.tilemapLayer.worldToTileXY(e,t,!0,l,s,a),r(l.x,l.y,i,n,a)}},59787:(e,t,i)=>{var r=i(98767),l=i(80586),n=new l(105,210,231,150),s=new l(243,134,48,200),a=new l(40,39,37,150);e.exports=function(e,t,i){void 0===t&&(t={});var l=void 0!==t.tileColor?t.tileColor:n,o=void 0!==t.collidingTileColor?t.collidingTileColor:s,h=void 0!==t.faceColor?t.faceColor:a,u=r(0,0,i.width,i.height,null,i);e.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),e.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var c=0;c<u.length;c++){var d=u[c],f=d.width,p=d.height,g=d.pixelX,y=d.pixelY,v=d.collides?o:l;null!==v&&(e.fillStyle(v.color,v.alpha/255),e.fillRect(g,y,f,p)),g+=1,y+=1,f-=2,p-=2,null!==h&&(e.lineStyle(1,h.color,h.alpha/255),d.faceTop&&e.lineBetween(g,y,g+f,y),d.faceRight&&e.lineBetween(g+f,y,g+f,y+p),d.faceBottom&&e.lineBetween(g,y+p,g+f,y+p),d.faceLeft&&e.lineBetween(g,y,g,y+p))}}},44641:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s,a){for(var o=r(i,l,n,s,null,a),h=0;h<o.length;h++)o[h]&&o[h].index===e&&(o[h].index=t)}},55645:e=>{e.exports=function(e,t,i,r){var l,n,s,a=e.data,o=e.width,h=e.height,u=e.tilemapLayer,c=Math.max(0,t.left),d=Math.min(o,t.right),f=Math.max(0,t.top),p=Math.min(h,t.bottom);if(0===i)for(n=f;n<p;n++)for(l=c;a[n]&&l<d;l++)(s=a[n][l])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);else if(1===i)for(n=f;n<p;n++)for(l=d;a[n]&&l>=c;l--)(s=a[n][l])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);else if(2===i)for(n=p;n>=f;n--)for(l=c;a[n]&&l<d;l++)(s=a[n][l])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);else if(3===i)for(n=p;n>=f;n--)for(l=d;a[n]&&l>=c;l--)(s=a[n][l])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);return u.tilesDrawn=r.length,u.tilesTotal=o*h,r}},62299:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(32474);e.exports=function(e,t,i,s,a){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===a&&(a=!0),Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++)n(e[o],t,s);if(a)for(var h=0;h<s.height;h++)for(var u=0;u<s.width;u++){var c=s.data[h][u];c&&-1!==e.indexOf(c.index)&&r(c,t)}i&&l(0,0,s.width,s.height,s)}},7630:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(32474);e.exports=function(e,t,i,s,a,o){if(void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),!(e>t)){for(var h=e;h<=t;h++)n(h,i,a);if(o)for(var u=0;u<a.height;u++)for(var c=0;c<a.width;c++){var d=a.data[u][c];d&&d.index>=e&&d.index<=t&&r(d,i)}s&&l(0,0,a.width,a.height,a)}}},10072:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(32474);e.exports=function(e,t,i,s){void 0===t&&(t=!0),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);for(var a=0;a<s.height;a++)for(var o=0;o<s.width;o++){var h=s.data[a][o];h&&-1===e.indexOf(h.index)&&(r(h,t),n(h.index,t,s))}i&&l(0,0,s.width,s.height,s)}},14966:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(60419);e.exports=function(e,t,i,s){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var a=0;a<s.height;a++)for(var o=0;o<s.width;o++){var h=s.data[a][o];if(h)for(var u in e)if(n(h.properties,u)){var c=e[u];Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)h.properties[u]===c[d]&&r(h,t)}}i&&l(0,0,s.width,s.height,s)}},36774:(e,t,i)=>{var r=i(35031),l=i(22122);e.exports=function(e,t,i){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var n=0;n<i.height;n++)for(var s=0;s<i.width;s++){var a=i.data[n][s];if(a){var o=a.getCollisionGroup();o&&o.objects&&o.objects.length>0&&r(a,e)}}t&&l(0,0,i.width,i.height,i)}},32474:e=>{e.exports=function(e,t,i){var r=i.collideIndexes.indexOf(e);t&&-1===r?i.collideIndexes.push(e):t||-1===r||i.collideIndexes.splice(r,1)}},35031:e=>{e.exports=function(e,t){t?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)}},69902:e=>{e.exports=function(e,t,i,r){if("number"==typeof e)r.callbacks[e]=null!==t?{callback:t,callbackContext:i}:void 0;else for(var l=0,n=e.length;l<n;l++)r.callbacks[e[l]]=null!==t?{callback:t,callbackContext:i}:void 0}},17335:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s,a){for(var o=r(e,t,i,l,null,a),h=0;h<o.length;h++)o[h].setCollisionCallback(n,s)}},70734:(e,t,i)=>{var r=i(98767),l=i(80675);e.exports=function(e,t,i,n,s){var a=r(e,t,i,n,null,s),o=a.map((function(e){return e.index}));l(o);for(var h=0;h<a.length;h++)a[h].index=o[h]}},31933:(e,t,i)=>{var r=i(12174),l=i(99e3);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,n=e.tilemapLayer,s=Math.floor(i.tileWidth*n.scaleX),a=Math.floor(i.tileHeight*n.scaleY);return{left:l(t.worldView.x-n.x,s,0,!0)-n.cullPaddingX,right:r(t.worldView.right-n.x,s,0,!0)+n.cullPaddingX,top:l(t.worldView.y-n.y,a/2,0,!0)-n.cullPaddingY,bottom:r(t.worldView.bottom-n.y,a/2,0,!0)+n.cullPaddingY}}},46341:(e,t,i)=>{var r=i(31933),l=i(55645);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var s=e.tilemapLayer;if(!s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY){var a=r(e,t);l(e,a,n,i)}return i}},16407:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n){i||(i=new r);var s=n.baseTileWidth,a=n.baseTileHeight,o=n.tilemapLayer,h=0,u=0;o&&(l||(l=o.scene.cameras.main),h=o.x+l.scrollX*(1-o.scrollFactorX),s*=o.scaleX,u=o.y+l.scrollY*(1-o.scrollFactorY),a*=o.scaleY);var c=h+e*s+t%2*(s/2),d=u+t*(a/2);return i.set(c,d)}},89485:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,l=i.tilemapLayer,n=0;return l&&(void 0===t&&(t=l.scene.cameras.main),n=l.y+t.scrollY*(1-l.scrollFactorY),r*=l.scaleY),n+e*(r/2)}},89098:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n,s){l||(l=new r);var a=s.baseTileWidth,o=s.baseTileHeight,h=s.tilemapLayer;h&&(n||(n=h.scene.cameras.main),t-=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY,e-=h.x+n.scrollX*(1-h.scrollFactorX),a*=h.scaleX);var u=i?Math.floor(t/(o/2)):t/(o/2),c=i?Math.floor((e+u%2*.5*a)/a):(e+u%2*.5*a)/a;return l.set(c,u)}},95608:e=>{e.exports=function(e,t,i,r){var l=r.baseTileHeight,n=r.tilemapLayer;return n&&(i||(i=n.scene.cameras.main),e-=n.y+i.scrollY*(1-n.scrollFactorY),l*=n.scaleY),t?Math.floor(e/(l/2)):e/(l/2)}},86349:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s,a){for(var o=r(i,l,n,s,null,a),h=0;h<o.length;h++)o[h]&&(o[h].index===e?o[h].index=t:o[h].index===t&&(o[h].index=e))}},80391:e=>{e.exports=function(e,t,i){var r=i.baseTileWidth,l=i.tilemapLayer,n=0;return l&&(t||(t=l.scene.cameras.main),n=l.x+t.scrollX*(1-l.scrollFactorX),r*=l.scaleX),n+e*r}},29938:(e,t,i)=>{var r=i(80391),l=i(56775),n=i(17321);e.exports=function(e,t,i,s,a){return i||(i=new n(0,0)),i.x=r(e,s,a),i.y=l(t,s,a),i}},56775:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,l=i.tilemapLayer,n=0;return l&&(t||(t=l.scene.cameras.main),n=l.y+t.scrollY*(1-l.scrollFactorY),r*=l.scaleY),n+e*r}},94999:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,s){if(n){var a,o=r(e,t,i,l,null,s),h=0;for(a=0;a<n.length;a++)h+=n[a].weight;if(!(h<=0))for(a=0;a<o.length;a++){for(var u=Math.random()*h,c=0,d=-1,f=0;f<n.length;f++)if(u<=(c+=n[f].weight)){var p=n[f].index;d=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}o[a].index=d}}}},78899:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=!0);var l=r.baseTileWidth,n=r.tilemapLayer;return n&&(i||(i=n.scene.cameras.main),e-=n.x+i.scrollX*(1-n.scrollFactorX),l*=n.scaleX),t?Math.floor(e/l):e/l}},99916:(e,t,i)=>{var r=i(78899),l=i(87472),n=i(17321);e.exports=function(e,t,i,s,a,o){return void 0===i&&(i=!0),s||(s=new n(0,0)),s.x=r(e,i,a,o),s.y=l(t,i,a,o),s}},87472:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=!0);var l=r.baseTileHeight,n=r.tilemapLayer;return n&&(i||(i=n.scene.cameras.main),e-=n.y+i.scrollY*(1-n.scrollFactorY),l*=n.scaleY),t?Math.floor(e/l):e/l}},32257:(e,t,i)=>{e.exports={CalculateFacesAt:i(500),CalculateFacesWithin:i(22122),CheckIsoBounds:i(32615),Copy:i(35432),CreateFromTiles:i(94916),CullBounds:i(65234),CullTiles:i(65479),Fill:i(22619),FilterTiles:i(34254),FindByIndex:i(71198),FindTile:i(87555),ForEachTile:i(30127),GetCullTilesFunction:i(69447),GetTileAt:i(15921),GetTileAtWorldXY:i(16304),GetTilesWithin:i(98767),GetTilesWithinShape:i(13091),GetTilesWithinWorldXY:i(79247),GetTileToWorldXFunction:i(10858),GetTileToWorldXYFunction:i(59363),GetTileToWorldYFunction:i(83277),GetWorldToTileXFunction:i(54343),GetWorldToTileXYFunction:i(53813),GetWorldToTileYFunction:i(30833),HasTileAt:i(5253),HasTileAtWorldXY:i(72502),HexagonalCullBounds:i(96921),HexagonalCullTiles:i(5802),HexagonalTileToWorldXY:i(56645),HexagonalTileToWorldY:i(96542),HexagonalWorldToTileXY:i(1917),HexagonalWorldToTileY:i(89055),IsInLayerBounds:i(48339),IsometricCullTiles:i(14879),IsometricTileToWorldXY:i(19462),IsometricWorldToTileXY:i(25901),PutTileAt:i(9749),PutTileAtWorldXY:i(10543),PutTilesAt:i(47663),Randomize:i(18396),RemoveTileAt:i(73019),RemoveTileAtWorldXY:i(47216),RenderDebug:i(59787),ReplaceByIndex:i(44641),RunCull:i(55645),SetCollision:i(62299),SetCollisionBetween:i(7630),SetCollisionByExclusion:i(10072),SetCollisionByProperty:i(14966),SetCollisionFromCollisionGroup:i(36774),SetLayerCollisionIndex:i(32474),SetTileCollision:i(35031),SetTileIndexCallback:i(69902),SetTileLocationCallback:i(17335),Shuffle:i(70734),StaggeredCullBounds:i(31933),StaggeredCullTiles:i(46341),StaggeredTileToWorldXY:i(16407),StaggeredTileToWorldY:i(89485),StaggeredWorldToTileXY:i(89098),StaggeredWorldToTileY:i(95608),SwapByIndex:i(86349),TileToWorldX:i(80391),TileToWorldXY:i(29938),TileToWorldY:i(56775),WeightedRandomize:i(94999),WorldToTileX:i(78899),WorldToTileXY:i(99916),WorldToTileY:i(87472)}},14011:e=>{e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},74774:(e,t,i)=>{var r={ORIENTATION:i(14011)};e.exports=r},72400:(e,t,i)=>{var r=i(72646),l=i(74774),n={Components:i(32257),Parsers:i(27344),Formats:i(53012),ImageCollection:i(73476),ParseToTilemap:i(5078),Tile:i(3825),Tilemap:i(77960),TilemapCreator:i(11328),TilemapFactory:i(81004),Tileset:i(47270),TilemapLayer:i(77686),Orientation:i(14011),LayerData:i(20814),MapData:i(6691),ObjectLayer:i(31894)};n=r(!1,n,l.ORIENTATION),e.exports=n},20814:(e,t,i)=>{var r=i(69186),l=i(14011),n=i(25738),s=new r({initialize:function(e){void 0===e&&(e={}),this.name=n(e,"name","layer"),this.x=n(e,"x",0),this.y=n(e,"y",0),this.width=n(e,"width",0),this.height=n(e,"height",0),this.tileWidth=n(e,"tileWidth",0),this.tileHeight=n(e,"tileHeight",0),this.baseTileWidth=n(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(e,"baseTileHeight",this.tileHeight),this.orientation=n(e,"orientation",l.ORTHOGONAL),this.widthInPixels=n(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(e,"alpha",1),this.visible=n(e,"visible",!0),this.properties=n(e,"properties",[]),this.indexes=n(e,"indexes",[]),this.collideIndexes=n(e,"collideIndexes",[]),this.callbacks=n(e,"callbacks",[]),this.bodies=n(e,"bodies",[]),this.data=n(e,"data",[]),this.tilemapLayer=n(e,"tilemapLayer",null),this.hexSideLength=n(e,"hexSideLength",0)}});e.exports=s},6691:(e,t,i)=>{var r=i(69186),l=i(14011),n=i(25738),s=new r({initialize:function(e){void 0===e&&(e={}),this.name=n(e,"name","map"),this.width=n(e,"width",0),this.height=n(e,"height",0),this.infinite=n(e,"infinite",!1),this.tileWidth=n(e,"tileWidth",0),this.tileHeight=n(e,"tileHeight",0),this.widthInPixels=n(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(e,"heightInPixels",this.height*this.tileHeight),this.format=n(e,"format",null),this.orientation=n(e,"orientation",l.ORTHOGONAL),this.renderOrder=n(e,"renderOrder","right-down"),this.version=n(e,"version","1"),this.properties=n(e,"properties",{}),this.layers=n(e,"layers",[]),this.images=n(e,"images",[]),this.objects=n(e,"objects",{}),this.collision=n(e,"collision",{}),this.tilesets=n(e,"tilesets",[]),this.imageCollections=n(e,"imageCollections",[]),this.tiles=n(e,"tiles",[]),this.hexSideLength=n(e,"hexSideLength",0)}});e.exports=s},31894:(e,t,i)=>{var r=i(69186),l=i(25738),n=new r({initialize:function(e){void 0===e&&(e={}),this.name=l(e,"name","object layer"),this.opacity=l(e,"opacity",1),this.properties=l(e,"properties",{}),this.propertyTypes=l(e,"propertytypes",{}),this.type=l(e,"type","objectgroup"),this.visible=l(e,"visible",!0),this.objects=l(e,"objects",[])}});e.exports=n},2002:(e,t,i)=>{var r=i(14011);e.exports=function(e){return"isometric"===(e=e.toLowerCase())?r.ISOMETRIC:"staggered"===e?r.STAGGERED:"hexagonal"===e?r.HEXAGONAL:r.ORTHOGONAL}},37441:(e,t,i)=>{var r=i(53012),l=i(38018),n=i(17498),s=i(91073),a=i(38309);e.exports=function(e,t,i,o,h,u){var c;switch(t){case r.ARRAY_2D:c=l(e,i,o,h,u);break;case r.CSV:c=n(e,i,o,h,u);break;case r.TILED_JSON:c=s(e,i,u);break;case r.WELTMEISTER:c=a(e,i,u);break;default:console.warn("Unrecognized tilemap data format: "+t),c=null}return c}},38018:(e,t,i)=>{var r=i(53012),l=i(20814),n=i(6691),s=i(3825);e.exports=function(e,t,i,a,o){for(var h=new l({tileWidth:i,tileHeight:a}),u=new n({name:e,tileWidth:i,tileHeight:a,format:r.ARRAY_2D,layers:[h]}),c=[],d=t.length,f=0,p=0;p<t.length;p++){c[p]=[];for(var g=t[p],y=0;y<g.length;y++){var v=parseInt(g[y],10);isNaN(v)||-1===v?c[p][y]=o?null:new s(h,-1,y,p,i,a):c[p][y]=new s(h,v,y,p,i,a)}0===f&&(f=g.length)}return u.width=h.width=f,u.height=h.height=d,u.widthInPixels=h.widthInPixels=f*i,u.heightInPixels=h.heightInPixels=d*a,h.data=c,u}},17498:(e,t,i)=>{var r=i(53012),l=i(38018);e.exports=function(e,t,i,n,s){var a=t.trim().split("\n").map((function(e){return e.split(",")})),o=l(e,a,i,n,s);return o.format=r.CSV,o}},10897:(e,t,i)=>{var r=i(20814),l=i(3825);e.exports=function(e,t){for(var i=[],n=0;n<e.layer.length;n++){for(var s=e.layer[n],a=new r({name:s.name,width:s.width,height:s.height,tileWidth:s.tilesize,tileHeight:s.tilesize,visible:1===s.visible}),o=[],h=[],u=0;u<s.data.length;u++){for(var c=0;c<s.data[u].length;c++){var d,f=s.data[u][c]-1;d=f>-1?new l(a,f,c,u,s.tilesize,s.tilesize):t?null:new l(a,-1,c,u,s.tilesize,s.tilesize),o.push(d)}h.push(o),o=[]}a.data=h,i.push(a)}return i}},72093:(e,t,i)=>{var r=i(47270);e.exports=function(e){for(var t=[],i=[],l=0;l<e.layer.length;l++){var n=e.layer[l],s=n.tilesetName;""!==s&&-1===i.indexOf(s)&&(i.push(s),t.push(new r(s,0,n.tilesize,n.tilesize,0,0)))}return t}},38309:(e,t,i)=>{var r=i(53012),l=i(6691),n=i(10897),s=i(72093);e.exports=function(e,t,i){if(0===t.layer.length)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var a=0,o=0,h=0;h<t.layer.length;h++)t.layer[h].width>a&&(a=t.layer[h].width),t.layer[h].height>o&&(o=t.layer[h].height);var u=new l({width:a,height:o,name:e,tileWidth:t.layer[0].tilesize,tileHeight:t.layer[0].tilesize,format:r.WELTMEISTER});return u.layers=n(t,i),u.tilesets=s(t),u}},89986:(e,t,i)=>{e.exports={ParseTileLayers:i(10897),ParseTilesets:i(72093),ParseWeltmeister:i(38309)}},27344:(e,t,i)=>{e.exports={FromOrientationString:i(2002),Parse:i(37441),Parse2DArray:i(38018),ParseCSV:i(17498),Impact:i(89986),Tiled:i(5709)}},42008:(e,t,i)=>{var r=i(72646);e.exports=function(e){for(var t,i,l,n,s,a=0;a<e.layers.length;a++){t=e.layers[a],n=null;for(var o=0;o<t.data.length;o++){s=t.data[o];for(var h=0;h<s.length;h++)null===(i=s[h])||i.index<0||(l=e.tiles[i.index][2],n=e.tilesets[l],i.width=n.tileWidth,i.height=n.tileHeight,n.tileProperties&&n.tileProperties[i.index-n.firstgid]&&(i.properties=r(i.properties,n.tileProperties[i.index-n.firstgid])))}}}},22645:e=>{e.exports=function(e){for(var t=window.atob(e),i=t.length,r=new Array(i/4),l=0;l<i;l+=4)r[l/4]=(t.charCodeAt(l)|t.charCodeAt(l+1)<<8|t.charCodeAt(l+2)<<16|t.charCodeAt(l+3)<<24)>>>0;return r}},7606:(e,t,i)=>{var r=i(47270);e.exports=function(e){var t,i,l=[];for(t=0;t<e.imageCollections.length;t++)for(var n=e.imageCollections[t],s=n.images,a=0;a<s.length;a++){var o=s[a];(i=new r(o.image,o.gid,n.imageWidth,n.imageHeight,0,0)).updateTileData(n.imageWidth,n.imageHeight),e.tilesets.push(i)}for(t=0;t<e.tilesets.length;t++)for(var h=(i=e.tilesets[t]).tileMargin,u=i.tileMargin,c=0,d=0,f=0,p=i.firstgid;p<i.firstgid+i.total&&(l[p]=[h,u,t],h+=i.tileWidth+i.tileSpacing,++c!==i.total)&&(++d!==i.columns||(h=i.tileMargin,u+=i.tileHeight+i.tileSpacing,d=0,++f!==i.rows));p++);return l}},37531:(e,t,i)=>{var r=i(25738);e.exports=function(e,t,i){if(!t)return{i:0,layers:e.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=t.x+r(t,"startx",0)*e.tilewidth+r(t,"offsetx",0),n=t.y+r(t,"starty",0)*e.tileheight+r(t,"offsety",0);return{i:0,layers:t.layers,name:i.name+t.name+"/",opacity:i.opacity*t.opacity,visible:i.visible&&t.visible,x:i.x+l,y:i.y+n}}},71551:e=>{e.exports=function(e){var t=Boolean(2147483648&e),i=Boolean(1073741824&e),r=Boolean(536870912&e);e&=536870911;var l=0,n=!1;return t&&i&&r?(l=Math.PI/2,n=!0):t&&i&&!r?(l=Math.PI,n=!1):t&&!i&&r?(l=Math.PI/2,n=!1):!t||i||r?!t&&i&&r?(l=3*Math.PI/2,n=!1):t||!i||r?t||i||!r?t||i||r||(l=0,n=!1):(l=3*Math.PI/2,n=!0):(l=Math.PI,n=!0):(l=0,n=!0),{gid:e,flippedHorizontal:t,flippedVertical:i,flippedAntiDiagonal:r,rotation:l,flipped:n}}},21895:(e,t,i)=>{var r=i(25738),l=i(37531);e.exports=function(e){for(var t=[],i=[],n=l(e);n.i<n.layers.length||i.length>0;)if(n.i>=n.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=i.pop()}else{var s=n.layers[n.i];if(n.i++,"imagelayer"===s.type){var a=r(s,"offsetx",0)+r(s,"startx",0),o=r(s,"offsety",0)+r(s,"starty",0);t.push({name:n.name+s.name,image:s.image,x:n.x+a+s.x,y:n.y+o+s.y,alpha:n.opacity*s.opacity,visible:n.visible&&s.visible,properties:r(s,"properties",{})})}else if("group"===s.type){var h=l(e,s,n);i.push(n),n=h}}return t}},91073:(e,t,i)=>{var r=i(42008),l=i(7606),n=i(14011),s=i(53012),a=i(2002),o=i(6691),h=i(21895),u=i(2556),c=i(41789),d=i(30460);e.exports=function(e,t,i){var f=new o({width:t.width,height:t.height,name:e,tileWidth:t.tilewidth,tileHeight:t.tileheight,orientation:a(t.orientation),format:s.TILED_JSON,version:t.version,properties:t.properties,renderOrder:t.renderorder,infinite:t.infinite});f.orientation===n.HEXAGONAL&&(f.hexSideLength=t.hexsidelength),f.layers=c(t,i),f.images=h(t);var p=d(t);return f.tilesets=p.tilesets,f.imageCollections=p.imageCollections,f.objects=u(t),f.tiles=l(f),r(f),f}},73327:(e,t,i)=>{var r=i(59210),l=i(71551),n=function(e){return{x:e.x,y:e.y}},s=["id","name","type","rotation","properties","visible","x","y","width","height"];e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var a=r(e,s);if(a.x+=t,a.y+=i,e.gid){var o=l(e.gid);a.gid=o.gid,a.flippedHorizontal=o.flippedHorizontal,a.flippedVertical=o.flippedVertical,a.flippedAntiDiagonal=o.flippedAntiDiagonal}else e.polyline?a.polyline=e.polyline.map(n):e.polygon?a.polygon=e.polygon.map(n):e.ellipse?a.ellipse=e.ellipse:e.text?a.text=e.text:e.point?a.point=!0:a.rectangle=!0;return a}},2556:(e,t,i)=>{var r=i(25738),l=i(73327),n=i(31894),s=i(37531);e.exports=function(e){for(var t=[],i=[],a=s(e);a.i<a.layers.length||i.length>0;)if(a.i>=a.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=i.pop()}else{var o=a.layers[a.i];if(a.i++,o.opacity*=a.opacity,o.visible=a.visible&&o.visible,"objectgroup"===o.type){o.name=a.name+o.name;for(var h=a.x+r(o,"startx",0)+r(o,"offsetx",0),u=a.y+r(o,"starty",0)+r(o,"offsety",0),c=[],d=0;d<o.objects.length;d++){var f=l(o.objects[d],h,u);c.push(f)}var p=new n(o);p.objects=c,t.push(p)}else if("group"===o.type){var g=s(e,o,a);i.push(a),a=g}}return t}},41789:(e,t,i)=>{var r=i(22645),l=i(14011),n=i(37531),s=i(2002),a=i(25738),o=i(20814),h=i(71551),u=i(3825);e.exports=function(e,t){for(var i=a(e,"infinite",!1),c=[],d=[],f=n(e);f.i<f.layers.length||d.length>0;)if(f.i>=f.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=d.pop()}else{var p=f.layers[f.i];if(f.i++,"tilelayer"===p.type)if(p.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+p.name+"'");else{if(p.encoding&&"base64"===p.encoding){if(p.chunks)for(var g=0;g<p.chunks.length;g++)p.chunks[g].data=r(p.chunks[g].data);p.data&&(p.data=r(p.data)),delete p.encoding}var y,v,x,m,T=[],w=0;if(i){var L=a(p,"startx",0)+p.x,b=a(p,"starty",0)+p.y;(y=new o({name:f.name+p.name,x:f.x+a(p,"offsetx",0)+L*e.tilewidth,y:f.y+a(p,"offsety",0)+b*e.tileheight,width:p.width,height:p.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:a(p,"properties",[]),orientation:s(e.orientation)})).orientation===l.HEXAGONAL&&(y.hexSideLength=e.hexsidelength);for(var W=0;W<p.height;W++){T.push([null]);for(var C=0;C<p.width;C++)T[W][C]=null}for(W=0,G=p.chunks.length;W<G;W++)for(var A=p.chunks[W],Y=A.x-L,X=A.y-b,I=0,O=0,S=A.data.length;O<S;O++){var H=w+Y,P=I+X;(v=h(A.data[O])).gid>0?((x=new u(y,v.gid,H,P,e.tilewidth,e.tileheight)).rotation=v.rotation,x.flipX=v.flipped,T[P][H]=x):(m=t?null:new u(y,-1,H,P,e.tilewidth,e.tileheight),T[P][H]=m),++w===A.width&&(I++,w=0)}}else{(y=new o({name:f.name+p.name,x:f.x+a(p,"offsetx",0)+p.x,y:f.y+a(p,"offsety",0)+p.y,width:p.width,height:p.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:a(p,"properties",[]),orientation:s(e.orientation)})).orientation===l.HEXAGONAL&&(y.hexSideLength=e.hexsidelength);for(var F=[],R=0,G=p.data.length;R<G;R++)(v=h(p.data[R])).gid>0?((x=new u(y,v.gid,w,T.length,e.tilewidth,e.tileheight)).rotation=v.rotation,x.flipX=v.flipped,F.push(x)):(m=t?null:new u(y,-1,w,T.length,e.tilewidth,e.tileheight),F.push(m)),++w===p.width&&(T.push(F),w=0,F=[])}y.data=T,c.push(y)}else if("group"===p.type){var M=n(e,p,f);d.push(f),f=M}}return c}},30460:(e,t,i)=>{var r=i(47270),l=i(73476),n=i(73327),s=i(52179);e.exports=function(e){for(var t,i=[],a=[],o=null,h=0;h<e.tilesets.length;h++){var u=e.tilesets[h];if(u.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(u.image){var c=new r(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing);if(e.version>1){var d=void 0,f=void 0;if(Array.isArray(u.tiles)){d=d||{},f=f||{};for(var p=0;p<u.tiles.length;p++){var g=u.tiles[p];if(g.properties){var y={};g.properties.forEach((function(e){y[e.name]=e.value})),f[g.id]=y}if(g.objectgroup&&((d[g.id]||(d[g.id]={})).objectgroup=g.objectgroup,g.objectgroup.objects)){var v=g.objectgroup.objects.map((function(e){return n(e)}));d[g.id].objectgroup.objects=v}g.animation&&((d[g.id]||(d[g.id]={})).animation=g.animation),g.type&&((d[g.id]||(d[g.id]={})).type=g.type)}}Array.isArray(u.wangsets)&&(d=d||{},f=f||{},s(u.wangsets,d)),d&&(c.tileData=d,c.tileProperties=f)}else if(u.tileproperties&&(c.tileProperties=u.tileproperties),u.tiles)for(t in c.tileData=u.tiles,c.tileData){var x=c.tileData[t].objectgroup;if(x&&x.objects){var m=x.objects.map((function(e){return n(e)}));c.tileData[t].objectgroup.objects=m}}c.updateTileData(u.imagewidth,u.imageheight),i.push(c)}else{var T=new l(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing,u.properties),w=0;for(p=0;p<u.tiles.length;p++){var L=(g=u.tiles[p]).image,b=parseInt(g.id,10),W=u.firstgid+b;T.addImage(W,L),w=Math.max(b,w)}T.maxId=w,a.push(T)}o&&(o.lastgid=u.firstgid-1),o=u}return{tilesets:i,imageCollections:a}}},52179:e=>{e.exports=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],l=i;if(r.name&&""!==r.name&&(l=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var n,s,a,o={},h={};if(Array.isArray(r.edgecolors))for(n=0;n<r.edgecolors.length;n++)a=1+n,""!==(s=r.edgecolors[n]).name&&(o[a]=s.name);if(Array.isArray(r.cornercolors))for(n=0;n<r.cornercolors.length;n++)a=1+n,""!==(s=r.cornercolors[n]).name&&(h[a]=s.name);if(Array.isArray(r.colors))for(n=0;n<r.colors.length;n++)a=1+n,""!==(s=r.colors[n]).name&&(o[a]=h[a]=s.name);for(var u=[o,h,o,h,o,h,o,h],c=0;c<r.wangtiles.length;c++){var d=r.wangtiles[c],f=t[d.tileid]||(t[d.tileid]={});f=f.wangid||(f.wangid={});for(var p=[],g=0;g<Math.min(u.length,d.wangid.length);g++)if(0!==(s=d.wangid[g])){var y=u[g][s];void 0===y?p.push(s):p.push(y)}else p.push(void 0);f[l]=p}}}}},5709:(e,t,i)=>{e.exports={AssignTileProperties:i(42008),Base64Decode:i(22645),BuildTilesetIndex:i(7606),CreateGroupLayer:i(37531),ParseGID:i(71551),ParseImageLayers:i(21895),ParseJSONTiled:i(91073),ParseObject:i(73327),ParseObjectLayers:i(2556),ParseTileLayers:i(41789),ParseTilesets:i(30460)}},88829:e=>{e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=e.length);var r=t+Math.floor(Math.random()*i);return void 0===e[r]?null:e[r]}},80675:e=>{e.exports=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e}},60419:e=>{e.exports=function(e,t){return e.hasOwnProperty(t)}},59210:(e,t,i)=>{var r=i(60419);e.exports=function(e,t){for(var i={},l=0;l<t.length;l++){var n=t[l];r(e,n)&&(i[n]=e[n])}return i}}}]);
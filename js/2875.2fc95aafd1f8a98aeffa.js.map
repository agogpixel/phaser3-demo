{"version":3,"file":"js/2875.2fc95aafd1f8a98aeffa.js","mappings":"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","sources":["webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/BaseSound.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/BaseSoundManager.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/SoundManagerCreator.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/html5/HTML5AudioSound.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/html5/HTML5AudioSoundManager.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/noaudio/NoAudioSound.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/noaudio/NoAudioSoundManager.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/webaudio/WebAudioSound.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/sound/webaudio/WebAudioSoundManager.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/utils/array/GetAll.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/utils/array/GetFirst.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/utils/array/SafeRange.js","webpack://@agogpixel/phaser3-demo/./node_modules/phaser/src/utils/base64/Base64ToArrayBuffer.js"],"sourcesContent":["/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar Class = require('../utils/Class');\r\nvar EventEmitter = require('eventemitter3');\r\nvar Events = require('./events');\r\nvar Extend = require('../utils/object/Extend');\r\nvar NOOP = require('../utils/NOOP');\r\n\r\n/**\r\n * @classdesc\r\n * Class containing all the shared state and behavior of a sound object, independent of the implementation.\r\n *\r\n * @class BaseSound\r\n * @extends Phaser.Events.EventEmitter\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Sound.BaseSoundManager} manager - Reference to the current sound manager instance.\r\n * @param {string} key - Asset key for the sound.\r\n * @param {Phaser.Types.Sound.SoundConfig} [config] - An optional config object containing default sound settings.\r\n */\r\nvar BaseSound = new Class({\r\n\r\n    Extends: EventEmitter,\r\n\r\n    initialize:\r\n\r\n    function BaseSound (manager, key, config)\r\n    {\r\n        EventEmitter.call(this);\r\n\r\n        /**\r\n         * Local reference to the sound manager.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#manager\r\n         * @type {Phaser.Sound.BaseSoundManager}\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.manager = manager;\r\n\r\n        /**\r\n         * Asset key for the sound.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#key\r\n         * @type {string}\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.key = key;\r\n\r\n        /**\r\n         * Flag indicating if sound is currently playing.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#isPlaying\r\n         * @type {boolean}\r\n         * @default false\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.isPlaying = false;\r\n\r\n        /**\r\n         * Flag indicating if sound is currently paused.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#isPaused\r\n         * @type {boolean}\r\n         * @default false\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.isPaused = false;\r\n\r\n        /**\r\n         * A property that holds the value of sound's actual playback rate,\r\n         * after its rate and detune values has been combined with global\r\n         * rate and detune values.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#totalRate\r\n         * @type {number}\r\n         * @default 1\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.totalRate = 1;\r\n\r\n        /**\r\n         * A value representing the duration, in seconds.\r\n         * It could be total sound duration or a marker duration.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#duration\r\n         * @type {number}\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.duration = this.duration || 0;\r\n\r\n        /**\r\n         * The total duration of the sound in seconds.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#totalDuration\r\n         * @type {number}\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.totalDuration = this.totalDuration || 0;\r\n\r\n        /**\r\n         * A config object used to store default sound settings' values.\r\n         * Default values will be set by properties' setters.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#config\r\n         * @type {Phaser.Types.Sound.SoundConfig}\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.config = {\r\n\r\n            mute: false,\r\n            volume: 1,\r\n            rate: 1,\r\n            detune: 0,\r\n            seek: 0,\r\n            loop: false,\r\n            delay: 0,\r\n            pan: 0\r\n\r\n        };\r\n\r\n        /**\r\n         * Reference to the currently used config.\r\n         * It could be default config or marker config.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#currentConfig\r\n         * @type {Phaser.Types.Sound.SoundConfig}\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.currentConfig = this.config;\r\n\r\n        this.config = Extend(this.config, config);\r\n\r\n        /**\r\n         * Object containing markers definitions.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#markers\r\n         * @type {Object.<string, Phaser.Types.Sound.SoundMarker>}\r\n         * @default {}\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.markers = {};\r\n\r\n        /**\r\n         * Currently playing marker.\r\n         * 'null' if whole sound is playing.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#currentMarker\r\n         * @type {Phaser.Types.Sound.SoundMarker}\r\n         * @default null\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.currentMarker = null;\r\n\r\n        /**\r\n         * Flag indicating if destroy method was called on this sound.\r\n         *\r\n         * @name Phaser.Sound.BaseSound#pendingRemove\r\n         * @type {boolean}\r\n         * @private\r\n         * @default false\r\n         * @since 3.0.0\r\n         */\r\n        this.pendingRemove = false;\r\n    },\r\n\r\n    /**\r\n     * Adds a marker into the current sound. A marker is represented by name, start time, duration, and optionally config object.\r\n     * This allows you to bundle multiple sounds together into a single audio file and use markers to jump between them for playback.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#addMarker\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Types.Sound.SoundMarker} marker - Marker object.\r\n     *\r\n     * @return {boolean} Whether the marker was added successfully.\r\n     */\r\n    addMarker: function (marker)\r\n    {\r\n        if (!marker || !marker.name || typeof marker.name !== 'string')\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (this.markers[marker.name])\r\n        {\r\n            // eslint-disable-next-line no-console\r\n            console.error('addMarker ' + marker.name + ' already exists in Sound');\r\n\r\n            return false;\r\n        }\r\n\r\n        marker = Extend(true, {\r\n            name: '',\r\n            start: 0,\r\n            duration: this.totalDuration - (marker.start || 0),\r\n            config: {\r\n                mute: false,\r\n                volume: 1,\r\n                rate: 1,\r\n                detune: 0,\r\n                seek: 0,\r\n                loop: false,\r\n                delay: 0,\r\n                pan: 0\r\n            }\r\n        }, marker);\r\n\r\n        this.markers[marker.name] = marker;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Updates previously added marker.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#updateMarker\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Types.Sound.SoundMarker} marker - Marker object with updated values.\r\n     *\r\n     * @return {boolean} Whether the marker was updated successfully.\r\n     */\r\n    updateMarker: function (marker)\r\n    {\r\n        if (!marker || !marker.name || typeof marker.name !== 'string')\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!this.markers[marker.name])\r\n        {\r\n            // eslint-disable-next-line no-console\r\n            console.warn('Audio Marker: ' + marker.name + ' missing in Sound: ' + this.key);\r\n\r\n            return false;\r\n        }\r\n\r\n        this.markers[marker.name] = Extend(true, this.markers[marker.name], marker);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Removes a marker from the sound.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#removeMarker\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} markerName - The name of the marker to remove.\r\n     *\r\n     * @return {?Phaser.Types.Sound.SoundMarker} Removed marker object or 'null' if there was no marker with provided name.\r\n     */\r\n    removeMarker: function (markerName)\r\n    {\r\n        var marker = this.markers[markerName];\r\n\r\n        if (!marker)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        this.markers[markerName] = null;\r\n\r\n        return marker;\r\n    },\r\n\r\n    /**\r\n     * Play this sound, or a marked section of it.\r\n     * It always plays the sound from the start. If you want to start playback from a specific time\r\n     * you can set 'seek' setting of the config object, provided to this call, to that value.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#play\r\n     * @since 3.0.0\r\n     *\r\n     * @param {(string|Phaser.Types.Sound.SoundConfig)} [markerName=''] - If you want to play a marker then provide the marker name here. Alternatively, this parameter can be a SoundConfig object.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - Optional sound config object to be applied to this marker or entire sound if no marker name is provided. It gets memorized for future plays of current section of the sound.\r\n     *\r\n     * @return {boolean} Whether the sound started playing successfully.\r\n     */\r\n    play: function (markerName, config)\r\n    {\r\n        if (markerName === undefined) { markerName = ''; }\r\n\r\n        if (typeof markerName === 'object')\r\n        {\r\n            config = markerName;\r\n            markerName = '';\r\n        }\r\n\r\n        if (typeof markerName !== 'string')\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!markerName)\r\n        {\r\n            this.currentMarker = null;\r\n            this.currentConfig = this.config;\r\n            this.duration = this.totalDuration;\r\n        }\r\n        else\r\n        {\r\n            if (!this.markers[markerName])\r\n            {\r\n                // eslint-disable-next-line no-console\r\n                console.warn('Marker: ' + markerName + ' missing in Sound: ' + this.key);\r\n\r\n                return false;\r\n            }\r\n\r\n            this.currentMarker = this.markers[markerName];\r\n            this.currentConfig = this.currentMarker.config;\r\n            this.duration = this.currentMarker.duration;\r\n        }\r\n\r\n        this.resetConfig();\r\n\r\n        this.currentConfig = Extend(this.currentConfig, config);\r\n\r\n        this.isPlaying = true;\r\n        this.isPaused = false;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Pauses the sound.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#pause\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was paused successfully.\r\n     */\r\n    pause: function ()\r\n    {\r\n        if (this.isPaused || !this.isPlaying)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        this.isPlaying = false;\r\n        this.isPaused = true;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Resumes the sound.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#resume\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was resumed successfully.\r\n     */\r\n    resume: function ()\r\n    {\r\n        if (!this.isPaused || this.isPlaying)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        this.isPlaying = true;\r\n        this.isPaused = false;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Stop playing this sound.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#stop\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was stopped successfully.\r\n     */\r\n    stop: function ()\r\n    {\r\n        if (!this.isPaused && !this.isPlaying)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        this.isPlaying = false;\r\n        this.isPaused = false;\r\n\r\n        this.resetConfig();\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Method used internally for applying config values to some of the sound properties.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#applyConfig\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    applyConfig: function ()\r\n    {\r\n        this.mute = this.currentConfig.mute;\r\n        this.volume = this.currentConfig.volume;\r\n        this.rate = this.currentConfig.rate;\r\n        this.detune = this.currentConfig.detune;\r\n        this.loop = this.currentConfig.loop;\r\n        this.pan = this.currentConfig.pan;\r\n    },\r\n\r\n    /**\r\n     * Method used internally for resetting values of some of the config properties.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#resetConfig\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    resetConfig: function ()\r\n    {\r\n        this.currentConfig.seek = 0;\r\n        this.currentConfig.delay = 0;\r\n    },\r\n\r\n    /**\r\n     * Update method called automatically by sound manager on every game step.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#update\r\n     * @override\r\n     * @protected\r\n     * @since 3.0.0\r\n     *\r\n     * @param {number} time - The current timestamp as generated by the Request Animation Frame or SetTimeout.\r\n     * @param {number} delta - The delta time elapsed since the last frame.\r\n     */\r\n    update: NOOP,\r\n\r\n    /**\r\n     * Method used internally to calculate total playback rate of the sound.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#calculateRate\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    calculateRate: function ()\r\n    {\r\n        var cent = 1.0005777895065548; // Math.pow(2, 1/1200);\r\n        var totalDetune = this.currentConfig.detune + this.manager.detune;\r\n        var detuneRate = Math.pow(cent, totalDetune);\r\n\r\n        this.totalRate = this.currentConfig.rate * this.manager.rate * detuneRate;\r\n    },\r\n\r\n    /**\r\n     * Destroys this sound and all associated events and marks it for removal from the sound manager.\r\n     *\r\n     * @method Phaser.Sound.BaseSound#destroy\r\n     * @fires Phaser.Sound.Events#DESTROY\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        if (this.pendingRemove)\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.emit(Events.DESTROY, this);\r\n        this.pendingRemove = true;\r\n        this.manager = null;\r\n        this.key = '';\r\n        this.removeAllListeners();\r\n        this.isPlaying = false;\r\n        this.isPaused = false;\r\n        this.config = null;\r\n        this.currentConfig = null;\r\n        this.markers = null;\r\n        this.currentMarker = null;\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = BaseSound;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar Class = require('../utils/Class');\r\nvar Clone = require('../utils/object/Clone');\r\nvar EventEmitter = require('eventemitter3');\r\nvar Events = require('./events');\r\nvar GameEvents = require('../core/events');\r\nvar NOOP = require('../utils/NOOP');\r\nvar GetAll = require('../utils/array/GetAll');\r\nvar GetFirst = require('../utils/array/GetFirst');\r\n\r\n/**\r\n * @classdesc\r\n * Base class for other Sound Manager classes.\r\n *\r\n * @class BaseSoundManager\r\n * @extends Phaser.Events.EventEmitter\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Game} game - Reference to the current game instance.\r\n *\r\n * @see Phaser.Sound.HTML5AudioSoundManager\r\n * @see Phaser.Sound.NoAudioSoundManager\r\n * @see Phaser.Sound.WebAudioSoundManager\r\n */\r\nvar BaseSoundManager = new Class({\r\n\r\n    Extends: EventEmitter,\r\n\r\n    initialize:\r\n\r\n    function BaseSoundManager (game)\r\n    {\r\n        EventEmitter.call(this);\r\n\r\n        /**\r\n         * Local reference to game.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#game\r\n         * @type {Phaser.Game}\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.game = game;\r\n\r\n        /**\r\n         * Local reference to the JSON Cache, as used by Audio Sprites.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#jsonCache\r\n         * @type {Phaser.Cache.BaseCache}\r\n         * @readonly\r\n         * @since 3.7.0\r\n         */\r\n        this.jsonCache = game.cache.json;\r\n\r\n        /**\r\n         * An array containing all added sounds.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#sounds\r\n         * @type {Phaser.Sound.BaseSound[]}\r\n         * @default []\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.sounds = [];\r\n\r\n        /**\r\n         * Global mute setting.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#mute\r\n         * @type {boolean}\r\n         * @default false\r\n         * @since 3.0.0\r\n         */\r\n        this.mute = false;\r\n\r\n        /**\r\n         * Global volume setting.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#volume\r\n         * @type {number}\r\n         * @default 1\r\n         * @since 3.0.0\r\n         */\r\n        this.volume = 1;\r\n\r\n        /**\r\n         * Flag indicating if sounds should be paused when game looses focus,\r\n         * for instance when user switches to another tab/program/app.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#pauseOnBlur\r\n         * @type {boolean}\r\n         * @default true\r\n         * @since 3.0.0\r\n         */\r\n        this.pauseOnBlur = true;\r\n\r\n        /**\r\n         * Property that actually holds the value of global playback rate.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#_rate\r\n         * @type {number}\r\n         * @private\r\n         * @default 1\r\n         * @since 3.0.0\r\n         */\r\n        this._rate = 1;\r\n\r\n        /**\r\n         * Property that actually holds the value of global detune.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#_detune\r\n         * @type {number}\r\n         * @private\r\n         * @default 0\r\n         * @since 3.0.0\r\n         */\r\n        this._detune = 0;\r\n\r\n        /**\r\n         * Mobile devices require sounds to be triggered from an explicit user action,\r\n         * such as a tap, before any sound can be loaded/played on a web page.\r\n         * Set to true if the audio system is currently locked awaiting user interaction.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#locked\r\n         * @type {boolean}\r\n         * @readonly\r\n         * @since 3.0.0\r\n         */\r\n        this.locked = this.locked || false;\r\n\r\n        /**\r\n         * Flag used internally for handling when the audio system\r\n         * has been unlocked, if there ever was a need for it.\r\n         *\r\n         * @name Phaser.Sound.BaseSoundManager#unlocked\r\n         * @type {boolean}\r\n         * @default false\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.unlocked = false;\r\n\r\n        game.events.on(GameEvents.BLUR, this.onGameBlur, this);\r\n        game.events.on(GameEvents.FOCUS, this.onGameFocus, this);\r\n        game.events.on(GameEvents.PRE_STEP, this.update, this);\r\n        game.events.once(GameEvents.DESTROY, this.destroy, this);\r\n    },\r\n\r\n    /**\r\n     * Adds a new sound into the sound manager.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#add\r\n     * @override\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - Asset key for the sound.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - An optional config object containing default sound settings.\r\n     *\r\n     * @return {Phaser.Sound.BaseSound} The new sound instance.\r\n     */\r\n    add: NOOP,\r\n\r\n    /**\r\n     * Adds a new audio sprite sound into the sound manager.\r\n     * Audio Sprites are a combination of audio files and a JSON configuration.\r\n     * The JSON follows the format of that created by https://github.com/tonistiigi/audiosprite\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#addAudioSprite\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - Asset key for the sound.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - An optional config object containing default sound settings.\r\n     *\r\n     * @return {(Phaser.Sound.HTML5AudioSound|Phaser.Sound.WebAudioSound)} The new audio sprite sound instance.\r\n     */\r\n    addAudioSprite: function (key, config)\r\n    {\r\n        if (config === undefined) { config = {}; }\r\n\r\n        var sound = this.add(key, config);\r\n\r\n        sound.spritemap = this.jsonCache.get(key).spritemap;\r\n\r\n        for (var markerName in sound.spritemap)\r\n        {\r\n            if (!sound.spritemap.hasOwnProperty(markerName))\r\n            {\r\n                continue;\r\n            }\r\n\r\n            var markerConfig = Clone(config);\r\n\r\n            var marker = sound.spritemap[markerName];\r\n\r\n            markerConfig.loop = (marker.hasOwnProperty('loop')) ? marker.loop : false;\r\n\r\n            sound.addMarker({\r\n                name: markerName,\r\n                start: marker.start,\r\n                duration: marker.end - marker.start,\r\n                config: markerConfig\r\n            });\r\n        }\r\n\r\n        return sound;\r\n    },\r\n\r\n    /**\r\n     * Gets the first sound in the manager matching the given key, if any.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#get\r\n     * @since 3.23.0\r\n     *\r\n     * @param {string} key - Sound asset key.\r\n     *\r\n     * @return {?Phaser.Sound.BaseSound} - The sound, or null.\r\n     */\r\n    get: function (key)\r\n    {\r\n        return GetFirst(this.sounds, 'key', key);\r\n    },\r\n\r\n    /**\r\n     * Gets any sounds in the manager matching the given key.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#getAll\r\n     * @since 3.23.0\r\n     *\r\n     * @param {string} key - Sound asset key.\r\n     *\r\n     * @return {Phaser.Sound.BaseSound[]} - The sounds, or an empty array.\r\n     */\r\n    getAll: function (key)\r\n    {\r\n        return GetAll(this.sounds, 'key', key);\r\n    },\r\n\r\n    /**\r\n     * Adds a new sound to the sound manager and plays it.\r\n     * The sound will be automatically removed (destroyed) once playback ends.\r\n     * This lets you play a new sound on the fly without the need to keep a reference to it.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#play\r\n     * @listens Phaser.Sound.Events#COMPLETE\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - Asset key for the sound.\r\n     * @param {(Phaser.Types.Sound.SoundConfig|Phaser.Types.Sound.SoundMarker)} [extra] - An optional additional object containing settings to be applied to the sound. It could be either config or marker object.\r\n     *\r\n     * @return {boolean} Whether the sound started playing successfully.\r\n     */\r\n    play: function (key, extra)\r\n    {\r\n        var sound = this.add(key);\r\n\r\n        sound.once(Events.COMPLETE, sound.destroy, sound);\r\n\r\n        if (extra)\r\n        {\r\n            if (extra.name)\r\n            {\r\n                sound.addMarker(extra);\r\n\r\n                return sound.play(extra.name);\r\n            }\r\n            else\r\n            {\r\n                return sound.play(extra);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            return sound.play();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Adds a new audio sprite sound to the sound manager and plays it.\r\n     * The sprite will be automatically removed (destroyed) once playback ends.\r\n     * This lets you play a new sound on the fly without the need to keep a reference to it.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#playAudioSprite\r\n     * @listens Phaser.Sound.Events#COMPLETE\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - Asset key for the sound.\r\n     * @param {string} spriteName - The name of the sound sprite to play.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - An optional config object containing default sound settings.\r\n     *\r\n     * @return {boolean} Whether the audio sprite sound started playing successfully.\r\n     */\r\n    playAudioSprite: function (key, spriteName, config)\r\n    {\r\n        var sound = this.addAudioSprite(key);\r\n\r\n        sound.once(Events.COMPLETE, sound.destroy, sound);\r\n\r\n        return sound.play(spriteName, config);\r\n    },\r\n\r\n    /**\r\n     * Removes a sound from the sound manager.\r\n     * The removed sound is destroyed before removal.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#remove\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Sound.BaseSound} sound - The sound object to remove.\r\n     *\r\n     * @return {boolean} True if the sound was removed successfully, otherwise false.\r\n     */\r\n    remove: function (sound)\r\n    {\r\n        var index = this.sounds.indexOf(sound);\r\n\r\n        if (index !== -1)\r\n        {\r\n            sound.destroy();\r\n\r\n            this.sounds.splice(index, 1);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n\r\n    /**\r\n     * Removes all sounds from the manager, destroying the sounds.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#removeAll\r\n     * @since 3.23.0\r\n     */\r\n    removeAll: function ()\r\n    {\r\n        this.sounds.forEach(function (sound)\r\n        {\r\n            sound.destroy();\r\n        });\r\n\r\n        this.sounds.length = 0;\r\n    },\r\n\r\n    /**\r\n     * Removes all sounds from the sound manager that have an asset key matching the given value.\r\n     * The removed sounds are destroyed before removal.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#removeByKey\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - The key to match when removing sound objects.\r\n     *\r\n     * @return {number} The number of matching sound objects that were removed.\r\n     */\r\n    removeByKey: function (key)\r\n    {\r\n        var removed = 0;\r\n\r\n        for (var i = this.sounds.length - 1; i >= 0; i--)\r\n        {\r\n            var sound = this.sounds[i];\r\n\r\n            if (sound.key === key)\r\n            {\r\n                sound.destroy();\r\n\r\n                this.sounds.splice(i, 1);\r\n\r\n                removed++;\r\n            }\r\n        }\r\n\r\n        return removed;\r\n    },\r\n\r\n    /**\r\n     * Pauses all the sounds in the game.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#pauseAll\r\n     * @fires Phaser.Sound.Events#PAUSE_ALL\r\n     * @since 3.0.0\r\n     */\r\n    pauseAll: function ()\r\n    {\r\n        this.forEachActiveSound(function (sound)\r\n        {\r\n            sound.pause();\r\n        });\r\n\r\n        this.emit(Events.PAUSE_ALL, this);\r\n    },\r\n\r\n    /**\r\n     * Resumes all the sounds in the game.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#resumeAll\r\n     * @fires Phaser.Sound.Events#RESUME_ALL\r\n     * @since 3.0.0\r\n     */\r\n    resumeAll: function ()\r\n    {\r\n        this.forEachActiveSound(function (sound)\r\n        {\r\n            sound.resume();\r\n        });\r\n\r\n        this.emit(Events.RESUME_ALL, this);\r\n    },\r\n\r\n    /**\r\n     * Stops all the sounds in the game.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#stopAll\r\n     * @fires Phaser.Sound.Events#STOP_ALL\r\n     * @since 3.0.0\r\n     */\r\n    stopAll: function ()\r\n    {\r\n        this.forEachActiveSound(function (sound)\r\n        {\r\n            sound.stop();\r\n        });\r\n\r\n        this.emit(Events.STOP_ALL, this);\r\n    },\r\n\r\n\r\n    /**\r\n     * Stops any sounds matching the given key.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#stopByKey\r\n     * @since 3.23.0\r\n     *\r\n     * @param {string} key - Sound asset key.\r\n     *\r\n     * @return {number} - How many sounds were stopped.\r\n     */\r\n    stopByKey: function (key)\r\n    {\r\n        var stopped = 0;\r\n\r\n        this.getAll(key).forEach(function (sound)\r\n        {\r\n            if (sound.stop()) { stopped++; }\r\n        });\r\n\r\n        return stopped;\r\n    },\r\n\r\n    /**\r\n     * Method used internally for unlocking audio playback on devices that\r\n     * require user interaction before any sound can be played on a web page.\r\n     *\r\n     * Read more about how this issue is handled here in [this article](https://medium.com/@pgoloskokovic/unlocking-web-audio-the-smarter-way-8858218c0e09).\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#unlock\r\n     * @override\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    unlock: NOOP,\r\n\r\n    /**\r\n     * Method used internally for pausing sound manager if\r\n     * Phaser.Sound.BaseSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#onBlur\r\n     * @override\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    onBlur: NOOP,\r\n\r\n    /**\r\n     * Method used internally for resuming sound manager if\r\n     * Phaser.Sound.BaseSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#onFocus\r\n     * @override\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    onFocus: NOOP,\r\n\r\n    /**\r\n     * Internal handler for Phaser.Core.Events#BLUR.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#onGameBlur\r\n     * @private\r\n     * @since 3.23.0\r\n     */\r\n    onGameBlur: function ()\r\n    {\r\n        if (this.pauseOnBlur)\r\n        {\r\n            this.onBlur();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Internal handler for Phaser.Core.Events#FOCUS.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#onGameFocus\r\n     * @private\r\n     * @since 3.23.0\r\n     */\r\n    onGameFocus: function ()\r\n    {\r\n        if (this.pauseOnBlur)\r\n        {\r\n            this.onFocus();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Update method called on every game step.\r\n     * Removes destroyed sounds and updates every active sound in the game.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#update\r\n     * @protected\r\n     * @fires Phaser.Sound.Events#UNLOCKED\r\n     * @since 3.0.0\r\n     *\r\n     * @param {number} time - The current timestamp as generated by the Request Animation Frame or SetTimeout.\r\n     * @param {number} delta - The delta time elapsed since the last frame.\r\n     */\r\n    update: function (time, delta)\r\n    {\r\n        if (this.unlocked)\r\n        {\r\n            this.unlocked = false;\r\n            this.locked = false;\r\n\r\n            this.emit(Events.UNLOCKED, this);\r\n        }\r\n\r\n        for (var i = this.sounds.length - 1; i >= 0; i--)\r\n        {\r\n            if (this.sounds[i].pendingRemove)\r\n            {\r\n                this.sounds.splice(i, 1);\r\n            }\r\n        }\r\n\r\n        this.sounds.forEach(function (sound)\r\n        {\r\n            sound.update(time, delta);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Destroys all the sounds in the game and all associated events.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#destroy\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        this.game.events.off(GameEvents.BLUR, this.onGameBlur, this);\r\n        this.game.events.off(GameEvents.FOCUS, this.onGameFocus, this);\r\n        this.game.events.off(GameEvents.PRE_STEP, this.update, this);\r\n\r\n        this.removeAllListeners();\r\n\r\n        this.removeAll();\r\n\r\n        this.sounds.length = 0;\r\n        this.sounds = null;\r\n\r\n        this.game = null;\r\n    },\r\n\r\n    /**\r\n     * Method used internally for iterating only over active sounds and skipping sounds that are marked for removal.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#forEachActiveSound\r\n     * @private\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Types.Sound.EachActiveSoundCallback} callback - Callback function. (manager: Phaser.Sound.BaseSoundManager, sound: Phaser.Sound.BaseSound, index: number, sounds: Phaser.Manager.BaseSound[]) => void\r\n     * @param {*} [scope] - Callback context.\r\n     */\r\n    forEachActiveSound: function (callback, scope)\r\n    {\r\n        var _this = this;\r\n\r\n        this.sounds.forEach(function (sound, index)\r\n        {\r\n            if (sound && !sound.pendingRemove)\r\n            {\r\n                callback.call(scope || _this, sound, index, _this.sounds);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sets the global playback rate at which all the sounds will be played.\r\n     *\r\n     * For example, a value of 1.0 plays the audio at full speed, 0.5 plays the audio at half speed\r\n     * and 2.0 doubles the audios playback speed.\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#setRate\r\n     * @fires Phaser.Sound.Events#GLOBAL_RATE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - Global playback rate at which all the sounds will be played.\r\n     *\r\n     * @return {Phaser.Sound.BaseSoundManager} This Sound Manager.\r\n     */\r\n    setRate: function (value)\r\n    {\r\n        this.rate = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Global playback rate at which all the sounds will be played.\r\n     * Value of 1.0 plays the audio at full speed, 0.5 plays the audio at half speed\r\n     * and 2.0 doubles the audio's playback speed.\r\n     *\r\n     * @name Phaser.Sound.BaseSoundManager#rate\r\n     * @type {number}\r\n     * @default 1\r\n     * @since 3.0.0\r\n     */\r\n    rate: {\r\n\r\n        get: function ()\r\n        {\r\n            return this._rate;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this._rate = value;\r\n\r\n            this.forEachActiveSound(function (sound)\r\n            {\r\n                sound.calculateRate();\r\n            });\r\n\r\n            this.emit(Events.GLOBAL_RATE, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the global detuning of all sounds in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\r\n     * The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @method Phaser.Sound.BaseSoundManager#setDetune\r\n     * @fires Phaser.Sound.Events#GLOBAL_DETUNE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @return {Phaser.Sound.BaseSoundManager} This Sound Manager.\r\n     */\r\n    setDetune: function (value)\r\n    {\r\n        this.detune = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Global detuning of all sounds in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\r\n     * The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @name Phaser.Sound.BaseSoundManager#detune\r\n     * @type {number}\r\n     * @default 0\r\n     * @since 3.0.0\r\n     */\r\n    detune: {\r\n\r\n        get: function ()\r\n        {\r\n            return this._detune;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this._detune = value;\r\n\r\n            this.forEachActiveSound(function (sound)\r\n            {\r\n                sound.calculateRate();\r\n            });\r\n\r\n            this.emit(Events.GLOBAL_DETUNE, this, value);\r\n        }\r\n\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = BaseSoundManager;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar HTML5AudioSoundManager = require('./html5/HTML5AudioSoundManager');\r\nvar NoAudioSoundManager = require('./noaudio/NoAudioSoundManager');\r\nvar WebAudioSoundManager = require('./webaudio/WebAudioSoundManager');\r\n\r\n/**\r\n * Creates a Web Audio, HTML5 Audio or No Audio Sound Manager based on config and device settings.\r\n *\r\n * Be aware of https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\r\n *\r\n * @function Phaser.Sound.SoundManagerCreator\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Game} game - Reference to the current game instance.\r\n *\r\n * @return {(Phaser.Sound.HTML5AudioSoundManager|Phaser.Sound.WebAudioSoundManager|Phaser.Sound.NoAudioSoundManager)} The Sound Manager instance that was created.\r\n */\r\nvar SoundManagerCreator = {\r\n\r\n    create: function (game)\r\n    {\r\n        var audioConfig = game.config.audio;\r\n        var deviceAudio = game.device.audio;\r\n\r\n        if (audioConfig.noAudio || (!deviceAudio.webAudio && !deviceAudio.audioData))\r\n        {\r\n            return new NoAudioSoundManager(game);\r\n        }\r\n\r\n        if (deviceAudio.webAudio && !audioConfig.disableWebAudio)\r\n        {\r\n            return new WebAudioSoundManager(game);\r\n        }\r\n\r\n        return new HTML5AudioSoundManager(game);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = SoundManagerCreator;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar BaseSound = require('../BaseSound');\r\nvar Class = require('../../utils/Class');\r\nvar Events = require('../events');\r\nvar Clamp = require('../../math/Clamp');\r\n\r\n/**\r\n * @classdesc\r\n * HTML5 Audio implementation of the sound.\r\n *\r\n * @class HTML5AudioSound\r\n * @extends Phaser.Sound.BaseSound\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Sound.HTML5AudioSoundManager} manager - Reference to the current sound manager instance.\r\n * @param {string} key - Asset key for the sound.\r\n * @param {Phaser.Types.Sound.SoundConfig} [config={}] - An optional config object containing default sound settings.\r\n */\r\nvar HTML5AudioSound = new Class({\r\n\r\n    Extends: BaseSound,\r\n\r\n    initialize:\r\n\r\n    function HTML5AudioSound (manager, key, config)\r\n    {\r\n        if (config === undefined) { config = {}; }\r\n\r\n        /**\r\n         * An array containing all HTML5 Audio tags that could be used for individual\r\n         * sound's playback. Number of instances depends on the config value passed\r\n         * to the Loader#audio method call, default is 1.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSound#tags\r\n         * @type {HTMLAudioElement[]}\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.tags = manager.game.cache.audio.get(key);\r\n\r\n        if (!this.tags)\r\n        {\r\n            throw new Error('There is no audio asset with key \"' + key + '\" in the audio cache');\r\n        }\r\n\r\n        /**\r\n         * Reference to an HTML5 Audio tag used for playing sound.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSound#audio\r\n         * @type {HTMLAudioElement}\r\n         * @private\r\n         * @default null\r\n         * @since 3.0.0\r\n         */\r\n        this.audio = null;\r\n\r\n        /**\r\n         * Timestamp as generated by the Request Animation Frame or SetTimeout\r\n         * representing the time at which the delayed sound playback should start.\r\n         * Set to 0 if sound playback is not delayed.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSound#startTime\r\n         * @type {number}\r\n         * @private\r\n         * @default 0\r\n         * @since 3.0.0\r\n         */\r\n        this.startTime = 0;\r\n\r\n        /**\r\n         * Audio tag's playback position recorded on previous\r\n         * update method call. Set to 0 if sound is not playing.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSound#previousTime\r\n         * @type {number}\r\n         * @private\r\n         * @default 0\r\n         * @since 3.0.0\r\n         */\r\n        this.previousTime = 0;\r\n\r\n        this.duration = this.tags[0].duration;\r\n\r\n        this.totalDuration = this.tags[0].duration;\r\n\r\n        BaseSound.call(this, manager, key, config);\r\n    },\r\n\r\n    /**\r\n     * Play this sound, or a marked section of it.\r\n     * It always plays the sound from the start. If you want to start playback from a specific time\r\n     * you can set 'seek' setting of the config object, provided to this call, to that value.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#play\r\n     * @fires Phaser.Sound.Events#PLAY\r\n     * @since 3.0.0\r\n     *\r\n     * @param {(string|Phaser.Types.Sound.SoundConfig)} [markerName=''] - If you want to play a marker then provide the marker name here. Alternatively, this parameter can be a SoundConfig object.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - Optional sound config object to be applied to this marker or entire sound if no marker name is provided. It gets memorized for future plays of current section of the sound.\r\n     *\r\n     * @return {boolean} Whether the sound started playing successfully.\r\n     */\r\n    play: function (markerName, config)\r\n    {\r\n        if (this.manager.isLocked(this, 'play', [ markerName, config ]))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!BaseSound.prototype.play.call(this, markerName, config))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = true, isPaused = false \\/\\/\\/\r\n        if (!this.pickAndPlayAudioTag())\r\n        {\r\n            return false;\r\n        }\r\n\r\n        this.emit(Events.PLAY, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Pauses the sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#pause\r\n     * @fires Phaser.Sound.Events#PAUSE\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was paused successfully.\r\n     */\r\n    pause: function ()\r\n    {\r\n        if (this.manager.isLocked(this, 'pause'))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (this.startTime > 0)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!BaseSound.prototype.pause.call(this))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = false, isPaused = true \\/\\/\\/\r\n        this.currentConfig.seek = this.audio.currentTime - (this.currentMarker ? this.currentMarker.start : 0);\r\n\r\n        this.stopAndReleaseAudioTag();\r\n\r\n        this.emit(Events.PAUSE, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Resumes the sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#resume\r\n     * @fires Phaser.Sound.Events#RESUME\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was resumed successfully.\r\n     */\r\n    resume: function ()\r\n    {\r\n        if (this.manager.isLocked(this, 'resume'))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (this.startTime > 0)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!BaseSound.prototype.resume.call(this))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = true, isPaused = false \\/\\/\\/\r\n        if (!this.pickAndPlayAudioTag())\r\n        {\r\n            return false;\r\n        }\r\n\r\n        this.emit(Events.RESUME, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Stop playing this sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#stop\r\n     * @fires Phaser.Sound.Events#STOP\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was stopped successfully.\r\n     */\r\n    stop: function ()\r\n    {\r\n        if (this.manager.isLocked(this, 'stop'))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!BaseSound.prototype.stop.call(this))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = false, isPaused = false \\/\\/\\/\r\n        this.stopAndReleaseAudioTag();\r\n\r\n        this.emit(Events.STOP, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Used internally to do what the name says.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#pickAndPlayAudioTag\r\n     * @private\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was assigned an audio tag successfully.\r\n     */\r\n    pickAndPlayAudioTag: function ()\r\n    {\r\n        if (!this.pickAudioTag())\r\n        {\r\n            this.reset();\r\n            return false;\r\n        }\r\n\r\n        var seek = this.currentConfig.seek;\r\n        var delay = this.currentConfig.delay;\r\n        var offset = (this.currentMarker ? this.currentMarker.start : 0) + seek;\r\n\r\n        this.previousTime = offset;\r\n        this.audio.currentTime = offset;\r\n        this.applyConfig();\r\n\r\n        if (delay === 0)\r\n        {\r\n            this.startTime = 0;\r\n\r\n            if (this.audio.paused)\r\n            {\r\n                this.playCatchPromise();\r\n            }\r\n        }\r\n        else\r\n        {\r\n            this.startTime = window.performance.now() + delay * 1000;\r\n\r\n            if (!this.audio.paused)\r\n            {\r\n                this.audio.pause();\r\n            }\r\n        }\r\n\r\n        this.resetConfig();\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * This method performs the audio tag pooling logic. It first looks for\r\n     * unused audio tag to assign to this sound object. If there are no unused\r\n     * audio tags, based on HTML5AudioSoundManager#override property value, it\r\n     * looks for sound with most advanced playback and hijacks its audio tag or\r\n     * does nothing.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#pickAudioTag\r\n     * @private\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was assigned an audio tag successfully.\r\n     */\r\n    pickAudioTag: function ()\r\n    {\r\n        if (this.audio)\r\n        {\r\n            return true;\r\n        }\r\n\r\n        for (var i = 0; i < this.tags.length; i++)\r\n        {\r\n            var audio = this.tags[i];\r\n\r\n            if (audio.dataset.used === 'false')\r\n            {\r\n                audio.dataset.used = 'true';\r\n                this.audio = audio;\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!this.manager.override)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        var otherSounds = [];\r\n\r\n        this.manager.forEachActiveSound(function (sound)\r\n        {\r\n            if (sound.key === this.key && sound.audio)\r\n            {\r\n                otherSounds.push(sound);\r\n            }\r\n        }, this);\r\n\r\n        otherSounds.sort(function (a1, a2)\r\n        {\r\n            if (a1.loop === a2.loop)\r\n            {\r\n                // sort by progress\r\n                return (a2.seek / a2.duration) - (a1.seek / a1.duration);\r\n            }\r\n            return a1.loop ? 1 : -1;\r\n        });\r\n\r\n        var selectedSound = otherSounds[0];\r\n\r\n        this.audio = selectedSound.audio;\r\n\r\n        selectedSound.reset();\r\n        selectedSound.audio = null;\r\n        selectedSound.startTime = 0;\r\n        selectedSound.previousTime = 0;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Method used for playing audio tag and catching possible exceptions\r\n     * thrown from rejected Promise returned from play method call.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#playCatchPromise\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    playCatchPromise: function ()\r\n    {\r\n        var playPromise = this.audio.play();\r\n\r\n        if (playPromise)\r\n        {\r\n            // eslint-disable-next-line no-unused-vars\r\n            playPromise.catch(function (reason)\r\n            {\r\n                console.warn(reason);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Used internally to do what the name says.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#stopAndReleaseAudioTag\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    stopAndReleaseAudioTag: function ()\r\n    {\r\n        this.startTime = 0;\r\n        this.previousTime = 0;\r\n\r\n        if (this.audio)\r\n        {\r\n            this.audio.pause();\r\n            this.audio.dataset.used = 'false';\r\n            this.audio = null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally to reset sound state, usually when stopping sound\r\n     * or when hijacking audio tag from another sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#reset\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    reset: function ()\r\n    {\r\n        BaseSound.prototype.stop.call(this);\r\n    },\r\n\r\n    /**\r\n     * Method used internally by sound manager for pausing sound if\r\n     * Phaser.Sound.HTML5AudioSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#onBlur\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    onBlur: function ()\r\n    {\r\n        this.isPlaying = false;\r\n        this.isPaused = true;\r\n\r\n        this.currentConfig.seek = this.audio.currentTime - (this.currentMarker ? this.currentMarker.start : 0);\r\n\r\n        this.currentConfig.delay = Math.max(0, (this.startTime - window.performance.now()) / 1000);\r\n\r\n        this.stopAndReleaseAudioTag();\r\n    },\r\n\r\n    /**\r\n     * Method used internally by sound manager for resuming sound if\r\n     * Phaser.Sound.HTML5AudioSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#onFocus\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    onFocus: function ()\r\n    {\r\n        this.isPlaying = true;\r\n        this.isPaused = false;\r\n        this.pickAndPlayAudioTag();\r\n    },\r\n\r\n    /**\r\n     * Update method called automatically by sound manager on every game step.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#update\r\n     * @fires Phaser.Sound.Events#COMPLETE\r\n     * @fires Phaser.Sound.Events#LOOPED\r\n     * @protected\r\n     * @since 3.0.0\r\n     *\r\n     * @param {number} time - The current timestamp as generated by the Request Animation Frame or SetTimeout.\r\n     */\r\n    update: function (time)\r\n    {\r\n        if (!this.isPlaying)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // handling delayed playback\r\n        if (this.startTime > 0)\r\n        {\r\n            if (this.startTime < time - this.manager.audioPlayDelay)\r\n            {\r\n                this.audio.currentTime += Math.max(0, time - this.startTime) / 1000;\r\n                this.startTime = 0;\r\n                this.previousTime = this.audio.currentTime;\r\n                this.playCatchPromise();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // handle looping and ending\r\n        var startTime = this.currentMarker ? this.currentMarker.start : 0;\r\n        var endTime = startTime + this.duration;\r\n        var currentTime = this.audio.currentTime;\r\n\r\n        if (this.currentConfig.loop)\r\n        {\r\n            if (currentTime >= endTime - this.manager.loopEndOffset)\r\n            {\r\n                this.audio.currentTime = startTime + Math.max(0, currentTime - endTime);\r\n                currentTime = this.audio.currentTime;\r\n            }\r\n            else if (currentTime < startTime)\r\n            {\r\n                this.audio.currentTime += startTime;\r\n                currentTime = this.audio.currentTime;\r\n            }\r\n\r\n            if (currentTime < this.previousTime)\r\n            {\r\n                this.emit(Events.LOOPED, this);\r\n            }\r\n        }\r\n        else if (currentTime >= endTime)\r\n        {\r\n            this.reset();\r\n\r\n            this.stopAndReleaseAudioTag();\r\n\r\n            this.emit(Events.COMPLETE, this);\r\n\r\n            return;\r\n        }\r\n\r\n        this.previousTime = currentTime;\r\n    },\r\n\r\n    /**\r\n     * Calls Phaser.Sound.BaseSound#destroy method\r\n     * and cleans up all HTML5 Audio related stuff.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#destroy\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        BaseSound.prototype.destroy.call(this);\r\n\r\n        this.tags = null;\r\n\r\n        if (this.audio)\r\n        {\r\n            this.stopAndReleaseAudioTag();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally to determine mute setting of the sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#updateMute\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    updateMute: function ()\r\n    {\r\n        if (this.audio)\r\n        {\r\n            this.audio.muted = this.currentConfig.mute || this.manager.mute;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally to calculate total volume of the sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#updateVolume\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    updateVolume: function ()\r\n    {\r\n        if (this.audio)\r\n        {\r\n            this.audio.volume = Clamp(this.currentConfig.volume * this.manager.volume, 0, 1);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally to calculate total playback rate of the sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#calculateRate\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    calculateRate: function ()\r\n    {\r\n        BaseSound.prototype.calculateRate.call(this);\r\n\r\n        if (this.audio)\r\n        {\r\n            this.audio.playbackRate = this.totalRate;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Boolean indicating whether the sound is muted or not.\r\n     * Gets or sets the muted state of this sound.\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#mute\r\n     * @type {boolean}\r\n     * @default false\r\n     * @fires Phaser.Sound.Events#MUTE\r\n     * @since 3.0.0\r\n     */\r\n    mute: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.mute;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.mute = value;\r\n\r\n            if (this.manager.isLocked(this, 'mute', value))\r\n            {\r\n                return;\r\n            }\r\n\r\n            this.updateMute();\r\n\r\n            this.emit(Events.MUTE, this, value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the muted state of this Sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setMute\r\n     * @fires Phaser.Sound.Events#MUTE\r\n     * @since 3.4.0\r\n     *\r\n     * @param {boolean} value - `true` to mute this sound, `false` to unmute it.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setMute: function (value)\r\n    {\r\n        this.mute = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Gets or sets the volume of this sound, a value between 0 (silence) and 1 (full volume).\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#volume\r\n     * @type {number}\r\n     * @default 1\r\n     * @fires Phaser.Sound.Events#VOLUME\r\n     * @since 3.0.0\r\n     */\r\n    volume: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.volume;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.volume = value;\r\n\r\n            if (this.manager.isLocked(this, 'volume', value))\r\n            {\r\n                return;\r\n            }\r\n\r\n            this.updateVolume();\r\n\r\n            this.emit(Events.VOLUME, this, value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the volume of this Sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setVolume\r\n     * @fires Phaser.Sound.Events#VOLUME\r\n     * @since 3.4.0\r\n     *\r\n     * @param {number} value - The volume of the sound.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setVolume: function (value)\r\n    {\r\n        this.volume = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Rate at which this Sound will be played.\r\n     * Value of 1.0 plays the audio at full speed, 0.5 plays the audio at half speed\r\n     * and 2.0 doubles the audios playback speed.\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#rate\r\n     * @type {number}\r\n     * @default 1\r\n     * @fires Phaser.Sound.Events#RATE\r\n     * @since 3.0.0\r\n     */\r\n    rate: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.rate;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.rate = value;\r\n\r\n            if (this.manager.isLocked(this, Events.RATE, value))\r\n            {\r\n                return;\r\n            }\r\n            else\r\n            {\r\n                this.calculateRate();\r\n\r\n                this.emit(Events.RATE, this, value);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the playback rate of this Sound.\r\n     *\r\n     * For example, a value of 1.0 plays the audio at full speed, 0.5 plays the audio at half speed\r\n     * and 2.0 doubles the audios playback speed.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setRate\r\n     * @fires Phaser.Sound.Events#RATE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The playback rate at of this Sound.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setRate: function (value)\r\n    {\r\n        this.rate = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * The detune value of this Sound, given in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\r\n     * The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#detune\r\n     * @type {number}\r\n     * @default 0\r\n     * @fires Phaser.Sound.Events#DETUNE\r\n     * @since 3.0.0\r\n     */\r\n    detune: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.detune;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.detune = value;\r\n\r\n            if (this.manager.isLocked(this, Events.DETUNE, value))\r\n            {\r\n                return;\r\n            }\r\n            else\r\n            {\r\n                this.calculateRate();\r\n\r\n                this.emit(Events.DETUNE, this, value);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the detune value of this Sound, given in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\r\n     * The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setDetune\r\n     * @fires Phaser.Sound.Events#DETUNE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setDetune: function (value)\r\n    {\r\n        this.detune = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Property representing the position of playback for this sound, in seconds.\r\n     * Setting it to a specific value moves current playback to that position.\r\n     * The value given is clamped to the range 0 to current marker duration.\r\n     * Setting seek of a stopped sound has no effect.\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#seek\r\n     * @type {number}\r\n     * @fires Phaser.Sound.Events#SEEK\r\n     * @since 3.0.0\r\n     */\r\n    seek: {\r\n\r\n        get: function ()\r\n        {\r\n            if (this.isPlaying)\r\n            {\r\n                return this.audio.currentTime - (this.currentMarker ? this.currentMarker.start : 0);\r\n            }\r\n            else if (this.isPaused)\r\n            {\r\n                return this.currentConfig.seek;\r\n            }\r\n            else\r\n            {\r\n                return 0;\r\n            }\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            if (this.manager.isLocked(this, 'seek', value))\r\n            {\r\n                return;\r\n            }\r\n\r\n            if (this.startTime > 0)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if (this.isPlaying || this.isPaused)\r\n            {\r\n                value = Math.min(Math.max(0, value), this.duration);\r\n\r\n                if (this.isPlaying)\r\n                {\r\n                    this.previousTime = value;\r\n                    this.audio.currentTime = value;\r\n                }\r\n                else if (this.isPaused)\r\n                {\r\n                    this.currentConfig.seek = value;\r\n                }\r\n\r\n                this.emit(Events.SEEK, this, value);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Seeks to a specific point in this sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setSeek\r\n     * @fires Phaser.Sound.Events#SEEK\r\n     * @since 3.4.0\r\n     *\r\n     * @param {number} value - The point in the sound to seek to.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setSeek: function (value)\r\n    {\r\n        this.seek = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Flag indicating whether or not the sound or current sound marker will loop.\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#loop\r\n     * @type {boolean}\r\n     * @default false\r\n     * @fires Phaser.Sound.Events#LOOP\r\n     * @since 3.0.0\r\n     */\r\n    loop: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.loop;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.loop = value;\r\n\r\n            if (this.manager.isLocked(this, 'loop', value))\r\n            {\r\n                return;\r\n            }\r\n\r\n            if (this.audio)\r\n            {\r\n                this.audio.loop = value;\r\n            }\r\n\r\n            this.emit(Events.LOOP, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the loop state of this Sound.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setLoop\r\n     * @fires Phaser.Sound.Events#LOOP\r\n     * @since 3.4.0\r\n     *\r\n     * @param {boolean} value - `true` to loop this sound, `false` to not loop it.\r\n     *\r\n     * @return {Phaser.Sound.HTML5AudioSound} This Sound instance.\r\n     */\r\n    setLoop: function (value)\r\n    {\r\n        this.loop = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Gets or sets the pan of this sound, a value between -1 (full left pan) and 1 (full right pan).\r\n     *\r\n     * Has no audible effect on HTML5 Audio Sound, but still generates the PAN Event.\r\n     *\r\n     * @name Phaser.Sound.HTML5AudioSound#pan\r\n     * @type {number}\r\n     * @default 0\r\n     * @fires Phaser.Sound.Events#PAN\r\n     * @since 3.50.0\r\n     */\r\n    pan: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.pan;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.pan = value;\r\n\r\n            this.emit(Events.PAN, this, value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the pan of this sound, a value between -1 (full left pan) and 1 (full right pan).\r\n     *\r\n     * Has no audible effect on HTML5 Audio Sound, but still generates the PAN Event.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSound#setPan\r\n     * @fires Phaser.Sound.Events#PAN\r\n     * @since 3.50.0\r\n     *\r\n     * @param {number} value - The pan of the sound. A value between -1 (full left pan) and 1 (full right pan).\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setPan: function (value)\r\n    {\r\n        this.pan = value;\r\n\r\n        return this;\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = HTML5AudioSound;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar BaseSoundManager = require('../BaseSoundManager');\r\nvar Class = require('../../utils/Class');\r\nvar Events = require('../events');\r\nvar HTML5AudioSound = require('./HTML5AudioSound');\r\n\r\n/**\r\n * HTML5 Audio implementation of the Sound Manager.\r\n *\r\n * To play multiple instances of the same HTML5 Audio sound, you need to provide an `instances` value when\r\n * loading the sound with the Loader:\r\n *\r\n * ```javascript\r\n * this.load.audio('explosion', 'explosion.mp3', {\r\n *     instances: 2\r\n * });\r\n * ```\r\n *\r\n * Not all browsers can play all audio formats.\r\n *\r\n * There is a good guide to what's supported: [Cross-browser audio basics: Audio codec support](https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/Cross-browser_audio_basics#Audio_Codec_Support).\r\n *\r\n * @class HTML5AudioSoundManager\r\n * @extends Phaser.Sound.BaseSoundManager\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Game} game - Reference to the current game instance.\r\n */\r\nvar HTML5AudioSoundManager = new Class({\r\n\r\n    Extends: BaseSoundManager,\r\n\r\n    initialize:\r\n\r\n    function HTML5AudioSoundManager (game)\r\n    {\r\n        /**\r\n         * Flag indicating whether if there are no idle instances of HTML5 Audio tag,\r\n         * for any particular sound, if one of the used tags should be hijacked and used\r\n         * for succeeding playback or if succeeding Phaser.Sound.HTML5AudioSound#play\r\n         * call should be ignored.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#override\r\n         * @type {boolean}\r\n         * @default true\r\n         * @since 3.0.0\r\n         */\r\n        this.override = true;\r\n\r\n        /**\r\n         * Value representing time difference, in seconds, between calling\r\n         * play method on an audio tag and when it actually starts playing.\r\n         * It is used to achieve more accurate delayed sound playback.\r\n         *\r\n         * You might need to tweak this value to get the desired results\r\n         * since audio play delay varies depending on the browser/platform.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#audioPlayDelay\r\n         * @type {number}\r\n         * @default 0.1\r\n         * @since 3.0.0\r\n         */\r\n        this.audioPlayDelay = 0.1;\r\n\r\n        /**\r\n         * A value by which we should offset the loop end marker of the\r\n         * looping sound to compensate for lag, caused by changing audio\r\n         * tag playback position, in order to achieve gapless looping.\r\n         *\r\n         * You might need to tweak this value to get the desired results\r\n         * since loop lag varies depending on the browser/platform.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#loopEndOffset\r\n         * @type {number}\r\n         * @default 0.05\r\n         * @since 3.0.0\r\n         */\r\n        this.loopEndOffset = 0.05;\r\n\r\n        /**\r\n         * An array for keeping track of all the sounds\r\n         * that were paused when game lost focus.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#onBlurPausedSounds\r\n         * @type {Phaser.Sound.HTML5AudioSound[]}\r\n         * @private\r\n         * @default []\r\n         * @since 3.0.0\r\n         */\r\n        this.onBlurPausedSounds = [];\r\n\r\n        this.locked = 'ontouchstart' in window;\r\n\r\n        /**\r\n         * A queue of all actions performed on sound objects while audio was locked.\r\n         * Once the audio gets unlocked, after an explicit user interaction,\r\n         * all actions will be performed in chronological order.\r\n         * Array of object types: { sound: Phaser.Sound.HTML5AudioSound, name: string, value?: * }\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#lockedActionsQueue\r\n         * @type {array}\r\n         * @private\r\n         * @since 3.0.0\r\n         */\r\n        this.lockedActionsQueue = this.locked ? [] : null;\r\n\r\n        /**\r\n         * Property that actually holds the value of global mute\r\n         * for HTML5 Audio sound manager implementation.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#_mute\r\n         * @type {boolean}\r\n         * @private\r\n         * @default false\r\n         * @since 3.0.0\r\n         */\r\n        this._mute = false;\r\n\r\n        /**\r\n         * Property that actually holds the value of global volume\r\n         * for HTML5 Audio sound manager implementation.\r\n         *\r\n         * @name Phaser.Sound.HTML5AudioSoundManager#_volume\r\n         * @type {boolean}\r\n         * @private\r\n         * @default 1\r\n         * @since 3.0.0\r\n         */\r\n        this._volume = 1;\r\n\r\n        BaseSoundManager.call(this, game);\r\n    },\r\n\r\n    /**\r\n     * Adds a new sound into the sound manager.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#add\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - Asset key for the sound.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - An optional config object containing default sound settings.\r\n     *\r\n     * @return {Phaser.Sound.HTML5AudioSound} The new sound instance.\r\n     */\r\n    add: function (key, config)\r\n    {\r\n        var sound = new HTML5AudioSound(this, key, config);\r\n\r\n        this.sounds.push(sound);\r\n\r\n        return sound;\r\n    },\r\n\r\n    /**\r\n     * Unlocks HTML5 Audio loading and playback on mobile\r\n     * devices on the initial explicit user interaction.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#unlock\r\n     * @since 3.0.0\r\n     */\r\n    unlock: function ()\r\n    {\r\n        this.locked = false;\r\n\r\n        var _this = this;\r\n\r\n        this.game.cache.audio.entries.each(function (key, tags)\r\n        {\r\n            for (var i = 0; i < tags.length; i++)\r\n            {\r\n                if (tags[i].dataset.locked === 'true')\r\n                {\r\n                    _this.locked = true;\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n        if (!this.locked)\r\n        {\r\n            return;\r\n        }\r\n\r\n        var moved = false;\r\n\r\n        var detectMove = function ()\r\n        {\r\n            moved = true;\r\n        };\r\n\r\n        var unlock = function ()\r\n        {\r\n            if (moved)\r\n            {\r\n                moved = false;\r\n                return;\r\n            }\r\n\r\n            document.body.removeEventListener('touchmove', detectMove);\r\n            document.body.removeEventListener('touchend', unlock);\r\n\r\n            var lockedTags = [];\r\n\r\n            _this.game.cache.audio.entries.each(function (key, tags)\r\n            {\r\n                for (var i = 0; i < tags.length; i++)\r\n                {\r\n                    var tag = tags[i];\r\n\r\n                    if (tag.dataset.locked === 'true')\r\n                    {\r\n                        lockedTags.push(tag);\r\n                    }\r\n                }\r\n\r\n                return true;\r\n            });\r\n\r\n            if (lockedTags.length === 0)\r\n            {\r\n                return;\r\n            }\r\n\r\n            var lastTag = lockedTags[lockedTags.length - 1];\r\n\r\n            lastTag.oncanplaythrough = function ()\r\n            {\r\n                lastTag.oncanplaythrough = null;\r\n\r\n                lockedTags.forEach(function (tag)\r\n                {\r\n                    tag.dataset.locked = 'false';\r\n                });\r\n\r\n                _this.unlocked = true;\r\n            };\r\n\r\n            lockedTags.forEach(function (tag)\r\n            {\r\n                tag.load();\r\n            });\r\n        };\r\n\r\n        this.once(Events.UNLOCKED, function ()\r\n        {\r\n            this.forEachActiveSound(function (sound)\r\n            {\r\n                if (sound.currentMarker === null && sound.duration === 0)\r\n                {\r\n                    sound.duration = sound.tags[0].duration;\r\n                }\r\n\r\n                sound.totalDuration = sound.tags[0].duration;\r\n            });\r\n\r\n            while (this.lockedActionsQueue.length)\r\n            {\r\n                var lockedAction = this.lockedActionsQueue.shift();\r\n\r\n                if (lockedAction.sound[lockedAction.prop].apply)\r\n                {\r\n                    lockedAction.sound[lockedAction.prop].apply(lockedAction.sound, lockedAction.value || []);\r\n                }\r\n                else\r\n                {\r\n                    lockedAction.sound[lockedAction.prop] = lockedAction.value;\r\n                }\r\n            }\r\n\r\n        }, this);\r\n\r\n        document.body.addEventListener('touchmove', detectMove, false);\r\n        document.body.addEventListener('touchend', unlock, false);\r\n    },\r\n\r\n    /**\r\n     * Method used internally for pausing sound manager if\r\n     * Phaser.Sound.HTML5AudioSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#onBlur\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    onBlur: function ()\r\n    {\r\n        this.forEachActiveSound(function (sound)\r\n        {\r\n            if (sound.isPlaying)\r\n            {\r\n                this.onBlurPausedSounds.push(sound);\r\n                sound.onBlur();\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method used internally for resuming sound manager if\r\n     * Phaser.Sound.HTML5AudioSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#onFocus\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    onFocus: function ()\r\n    {\r\n        this.onBlurPausedSounds.forEach(function (sound)\r\n        {\r\n            sound.onFocus();\r\n        });\r\n\r\n        this.onBlurPausedSounds.length = 0;\r\n    },\r\n\r\n    /**\r\n     * Calls Phaser.Sound.BaseSoundManager#destroy method\r\n     * and cleans up all HTML5 Audio related stuff.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#destroy\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        BaseSoundManager.prototype.destroy.call(this);\r\n\r\n        this.onBlurPausedSounds.length = 0;\r\n        this.onBlurPausedSounds = null;\r\n    },\r\n\r\n    /**\r\n     * Method used internally by Phaser.Sound.HTML5AudioSound class methods and property setters\r\n     * to check if sound manager is locked and then either perform action immediately or queue it\r\n     * to be performed once the sound manager gets unlocked.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#isLocked\r\n     * @protected\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Sound.HTML5AudioSound} sound - Sound object on which to perform queued action.\r\n     * @param {string} prop - Name of the method to be called or property to be assigned a value to.\r\n     * @param {*} [value] - An optional parameter that either holds an array of arguments to be passed to the method call or value to be set to the property.\r\n     *\r\n     * @return {boolean} Whether the sound manager is locked.\r\n     */\r\n    isLocked: function (sound, prop, value)\r\n    {\r\n        if (sound.tags[0].dataset.locked === 'true')\r\n        {\r\n            this.lockedActionsQueue.push({\r\n                sound: sound,\r\n                prop: prop,\r\n                value: value\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Sets the muted state of all this Sound Manager.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#setMute\r\n     * @fires Phaser.Sound.Events#GLOBAL_MUTE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {boolean} value - `true` to mute all sounds, `false` to unmute them.\r\n     *\r\n     * @return {Phaser.Sound.HTML5AudioSoundManager} This Sound Manager.\r\n     */\r\n    setMute: function (value)\r\n    {\r\n        this.mute = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @name Phaser.Sound.HTML5AudioSoundManager#mute\r\n     * @type {boolean}\r\n     * @fires Phaser.Sound.Events#GLOBAL_MUTE\r\n     * @since 3.0.0\r\n     */\r\n    mute: {\r\n\r\n        get: function ()\r\n        {\r\n            return this._mute;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this._mute = value;\r\n\r\n            this.forEachActiveSound(function (sound)\r\n            {\r\n                sound.updateMute();\r\n            });\r\n\r\n            this.emit(Events.GLOBAL_MUTE, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the volume of this Sound Manager.\r\n     *\r\n     * @method Phaser.Sound.HTML5AudioSoundManager#setVolume\r\n     * @fires Phaser.Sound.Events#GLOBAL_VOLUME\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The global volume of this Sound Manager.\r\n     *\r\n     * @return {Phaser.Sound.HTML5AudioSoundManager} This Sound Manager.\r\n     */\r\n    setVolume: function (value)\r\n    {\r\n        this.volume = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @name Phaser.Sound.HTML5AudioSoundManager#volume\r\n     * @type {number}\r\n     * @fires Phaser.Sound.Events#GLOBAL_VOLUME\r\n     * @since 3.0.0\r\n     */\r\n    volume: {\r\n\r\n        get: function ()\r\n        {\r\n            return this._volume;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this._volume = value;\r\n\r\n            this.forEachActiveSound(function (sound)\r\n            {\r\n                sound.updateVolume();\r\n            });\r\n\r\n            this.emit(Events.GLOBAL_VOLUME, this, value);\r\n        }\r\n\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = HTML5AudioSoundManager;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar BaseSound = require('../BaseSound');\r\nvar Class = require('../../utils/Class');\r\nvar EventEmitter = require('eventemitter3');\r\nvar Extend = require('../../utils/object/Extend');\r\n\r\nvar returnFalse = function ()\r\n{\r\n    return false;\r\n};\r\n\r\nvar returnNull = function ()\r\n{\r\n    return null;\r\n};\r\n\r\nvar returnThis = function ()\r\n{\r\n    return this;\r\n};\r\n\r\n/**\r\n * @classdesc\r\n * No audio implementation of the sound. It is used if audio has been\r\n * disabled in the game config or the device doesn't support any audio.\r\n *\r\n * It represents a graceful degradation of sound logic that provides\r\n * minimal functionality and prevents Phaser projects that use audio from\r\n * breaking on devices that don't support any audio playback technologies.\r\n *\r\n * @class NoAudioSound\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Sound.NoAudioSoundManager} manager - Reference to the current sound manager instance.\r\n * @param {string} key - Asset key for the sound.\r\n * @param {Phaser.Types.Sound.SoundConfig} [config={}] - An optional config object containing default sound settings.\r\n */\r\nvar NoAudioSound = new Class({\r\n\r\n    Extends: EventEmitter,\r\n\r\n    initialize:\r\n\r\n    function NoAudioSound (manager, key, config)\r\n    {\r\n        if (config === void 0) { config = {}; }\r\n\r\n        EventEmitter.call(this);\r\n\r\n        this.manager = manager;\r\n        this.key = key;\r\n        this.isPlaying = false;\r\n        this.isPaused = false;\r\n        this.totalRate = 1;\r\n        this.duration = 0;\r\n        this.totalDuration = 0;\r\n\r\n        this.config = Extend({\r\n            mute: false,\r\n            volume: 1,\r\n            rate: 1,\r\n            detune: 0,\r\n            seek: 0,\r\n            loop: false,\r\n            delay: 0,\r\n            pan: 0\r\n        }, config);\r\n\r\n        this.currentConfig = this.config;\r\n        this.mute = false;\r\n        this.volume = 1;\r\n        this.rate = 1;\r\n        this.detune = 0;\r\n        this.seek = 0;\r\n        this.loop = false;\r\n        this.pan = 0;\r\n        this.markers = {};\r\n        this.currentMarker = null;\r\n        this.pendingRemove = false;\r\n    },\r\n\r\n    /**\r\n     * @method Phaser.Sound.NoAudioSound#addMarker\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Types.Sound.SoundMarker} marker - Marker object.\r\n     *\r\n     * @return {boolean} false\r\n     */\r\n    addMarker: returnFalse,\r\n\r\n    /**\r\n     * @method Phaser.Sound.NoAudioSound#updateMarker\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Types.Sound.SoundMarker} marker - Marker object with updated values.\r\n     *\r\n     * @return {boolean} false\r\n     */\r\n    updateMarker: returnFalse,\r\n\r\n    /**\r\n     * @method Phaser.Sound.NoAudioSound#removeMarker\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} markerName - The name of the marker to remove.\r\n     *\r\n     * @return {null} null\r\n     */\r\n    removeMarker: returnNull,\r\n\r\n    /**\r\n     * @method Phaser.Sound.NoAudioSound#play\r\n     * @since 3.0.0\r\n     *\r\n     * @param {(string|Phaser.Types.Sound.SoundConfig)} [markerName=''] - If you want to play a marker then provide the marker name here. Alternatively, this parameter can be a SoundConfig object.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - Optional sound config object to be applied to this marker or entire sound if no marker name is provided. It gets memorized for future plays of current section of the sound.\r\n     *\r\n     * @return {boolean} false\r\n     */\r\n    play: returnFalse,\r\n\r\n    /**\r\n     * @method Phaser.Sound.NoAudioSound#pause\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} false\r\n     */\r\n    pause: returnFalse,\r\n\r\n    /**\r\n     * Resumes the sound.\r\n     *\r\n     * @method Phaser.Sound.NoAudioSound#resume\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} false\r\n     */\r\n    resume: returnFalse,\r\n\r\n    /**\r\n     * Stop playing this sound.\r\n     *\r\n     * @method Phaser.Sound.NoAudioSound#stop\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} false\r\n     */\r\n    stop: returnFalse,\r\n\r\n    /**\r\n     * Destroys this sound and all associated events and marks it for removal from the sound manager.\r\n     *\r\n     * @method Phaser.Sound.NoAudioSound#destroy\r\n     * @fires Phaser.Sound.Events#DESTROY\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        BaseSound.prototype.destroy.call(this);\r\n    },\r\n\r\n    setMute: returnThis,\r\n\r\n    setVolume: returnThis,\r\n\r\n    setRate: returnThis,\r\n\r\n    setDetune: returnThis,\r\n\r\n    setSeek: returnThis,\r\n\r\n    setLoop: returnThis,\r\n\r\n    setPan: returnThis\r\n\r\n});\r\n\r\nmodule.exports = NoAudioSound;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar BaseSoundManager = require('../BaseSoundManager');\r\nvar Class = require('../../utils/Class');\r\nvar EventEmitter = require('eventemitter3');\r\nvar NoAudioSound = require('./NoAudioSound');\r\nvar NOOP = require('../../utils/NOOP');\r\n\r\n/**\r\n * @classdesc\r\n * No-audio implementation of the Sound Manager. It is used if audio has been\r\n * disabled in the game config or the device doesn't support any audio.\r\n *\r\n * It represents a graceful degradation of Sound Manager logic that provides\r\n * minimal functionality and prevents Phaser projects that use audio from\r\n * breaking on devices that don't support any audio playback technologies.\r\n *\r\n * @class NoAudioSoundManager\r\n * @extends Phaser.Sound.BaseSoundManager\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Game} game - Reference to the current game instance.\r\n */\r\nvar NoAudioSoundManager = new Class({\r\n\r\n    Extends: EventEmitter,\r\n\r\n    initialize:\r\n\r\n    function NoAudioSoundManager (game)\r\n    {\r\n        EventEmitter.call(this);\r\n\r\n        this.game = game;\r\n        this.sounds = [];\r\n        this.mute = false;\r\n        this.volume = 1;\r\n        this.rate = 1;\r\n        this.detune = 0;\r\n        this.pauseOnBlur = true;\r\n        this.locked = false;\r\n    },\r\n\r\n    add: function (key, config)\r\n    {\r\n        var sound = new NoAudioSound(this, key, config);\r\n\r\n        this.sounds.push(sound);\r\n\r\n        return sound;\r\n    },\r\n\r\n    addAudioSprite: function (key, config)\r\n    {\r\n        var sound = this.add(key, config);\r\n\r\n        sound.spritemap = {};\r\n\r\n        return sound;\r\n    },\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    play: function (key, extra)\r\n    {\r\n        return false;\r\n    },\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    playAudioSprite: function (key, spriteName, config)\r\n    {\r\n        return false;\r\n    },\r\n\r\n    remove: function (sound)\r\n    {\r\n        return BaseSoundManager.prototype.remove.call(this, sound);\r\n    },\r\n\r\n    removeByKey: function (key)\r\n    {\r\n        return BaseSoundManager.prototype.removeByKey.call(this, key);\r\n    },\r\n\r\n    pauseAll: NOOP,\r\n    resumeAll: NOOP,\r\n    stopAll: NOOP,\r\n    update: NOOP,\r\n    setRate: NOOP,\r\n    setDetune: NOOP,\r\n    setMute: NOOP,\r\n    setVolume: NOOP,\r\n\r\n    forEachActiveSound: function (callbackfn, scope)\r\n    {\r\n        BaseSoundManager.prototype.forEachActiveSound.call(this, callbackfn, scope);\r\n    },\r\n\r\n    destroy: function ()\r\n    {\r\n        BaseSoundManager.prototype.destroy.call(this);\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = NoAudioSoundManager;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar BaseSound = require('../BaseSound');\r\nvar Class = require('../../utils/Class');\r\nvar Events = require('../events');\r\n\r\n/**\r\n * @classdesc\r\n * Web Audio API implementation of the sound.\r\n *\r\n * @class WebAudioSound\r\n * @extends Phaser.Sound.BaseSound\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Sound.WebAudioSoundManager} manager - Reference to the current sound manager instance.\r\n * @param {string} key - Asset key for the sound.\r\n * @param {Phaser.Types.Sound.SoundConfig} [config={}] - An optional config object containing default sound settings.\r\n */\r\nvar WebAudioSound = new Class({\r\n\r\n    Extends: BaseSound,\r\n\r\n    initialize:\r\n\r\n    function WebAudioSound (manager, key, config)\r\n    {\r\n        if (config === undefined) { config = {}; }\r\n\r\n        /**\r\n         * Audio buffer containing decoded data of the audio asset to be played.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#audioBuffer\r\n         * @type {AudioBuffer}\r\n         * @since 3.0.0\r\n         */\r\n        this.audioBuffer = manager.game.cache.audio.get(key);\r\n\r\n        if (!this.audioBuffer)\r\n        {\r\n            throw new Error('Audio key \"' + key + '\" missing from cache');\r\n        }\r\n\r\n        /**\r\n         * A reference to an audio source node used for playing back audio from\r\n         * audio data stored in Phaser.Sound.WebAudioSound#audioBuffer.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#source\r\n         * @type {AudioBufferSourceNode}\r\n         * @default null\r\n         * @since 3.0.0\r\n         */\r\n        this.source = null;\r\n\r\n        /**\r\n         * A reference to a second audio source used for gapless looped playback.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#loopSource\r\n         * @type {AudioBufferSourceNode}\r\n         * @default null\r\n         * @since 3.0.0\r\n         */\r\n        this.loopSource = null;\r\n\r\n        /**\r\n         * Gain node responsible for controlling this sound's muting.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#muteNode\r\n         * @type {GainNode}\r\n         * @since 3.0.0\r\n         */\r\n        this.muteNode = manager.context.createGain();\r\n\r\n        /**\r\n         * Gain node responsible for controlling this sound's volume.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#volumeNode\r\n         * @type {GainNode}\r\n         * @since 3.0.0\r\n         */\r\n        this.volumeNode = manager.context.createGain();\r\n\r\n        /**\r\n         * Panner node responsible for controlling this sound's pan.\r\n         *\r\n         * Doesn't work on iOS / Safari.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#pannerNode\r\n         * @type {StereoPannerNode}\r\n         * @since 3.50.0\r\n         */\r\n        this.pannerNode = null;\r\n\r\n        /**\r\n         * The time at which the sound should have started playback from the beginning.\r\n         * Based on BaseAudioContext.currentTime value.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#playTime\r\n         * @type {number}\r\n         * @private\r\n         * @default 0\r\n         * @since 3.0.0\r\n         */\r\n        this.playTime = 0;\r\n\r\n        /**\r\n         * The time at which the sound source should have actually started playback.\r\n         * Based on BaseAudioContext.currentTime value.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#startTime\r\n         * @type {number}\r\n         * @private\r\n         * @default 0\r\n         * @since 3.0.0\r\n         */\r\n        this.startTime = 0;\r\n\r\n        /**\r\n         * The time at which the sound loop source should actually start playback.\r\n         * Based on BaseAudioContext.currentTime value.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#loopTime\r\n         * @type {number}\r\n         * @private\r\n         * @default 0\r\n         * @since 3.0.0\r\n         */\r\n        this.loopTime = 0;\r\n\r\n        /**\r\n         * An array where we keep track of all rate updates during playback.\r\n         * Array of object types: { time: number, rate: number }\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#rateUpdates\r\n         * @type {array}\r\n         * @private\r\n         * @default []\r\n         * @since 3.0.0\r\n         */\r\n        this.rateUpdates = [];\r\n\r\n        /**\r\n         * Used for keeping track when sound source playback has ended\r\n         * so its state can be updated accordingly.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#hasEnded\r\n         * @type {boolean}\r\n         * @readonly\r\n         * @default false\r\n         * @since 3.0.0\r\n         */\r\n        this.hasEnded = false;\r\n\r\n        /**\r\n         * Used for keeping track when sound source has looped\r\n         * so its state can be updated accordingly.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSound#hasLooped\r\n         * @type {boolean}\r\n         * @readonly\r\n         * @default false\r\n         * @since 3.0.0\r\n         */\r\n        this.hasLooped = false;\r\n\r\n        this.muteNode.connect(this.volumeNode);\r\n\r\n        if (manager.context.createStereoPanner)\r\n        {\r\n            this.pannerNode = manager.context.createStereoPanner();\r\n\r\n            this.volumeNode.connect(this.pannerNode);\r\n\r\n            this.pannerNode.connect(manager.destination);\r\n        }\r\n        else\r\n        {\r\n            this.volumeNode.connect(manager.destination);\r\n        }\r\n\r\n        this.duration = this.audioBuffer.duration;\r\n\r\n        this.totalDuration = this.audioBuffer.duration;\r\n\r\n        BaseSound.call(this, manager, key, config);\r\n    },\r\n\r\n    /**\r\n     * Play this sound, or a marked section of it.\r\n     *\r\n     * It always plays the sound from the start. If you want to start playback from a specific time\r\n     * you can set 'seek' setting of the config object, provided to this call, to that value.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#play\r\n     * @fires Phaser.Sound.Events#PLAY\r\n     * @since 3.0.0\r\n     *\r\n     * @param {(string|Phaser.Types.Sound.SoundConfig)} [markerName=''] - If you want to play a marker then provide the marker name here. Alternatively, this parameter can be a SoundConfig object.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - Optional sound config object to be applied to this marker or entire sound if no marker name is provided. It gets memorized for future plays of current section of the sound.\r\n     *\r\n     * @return {boolean} Whether the sound started playing successfully.\r\n     */\r\n    play: function (markerName, config)\r\n    {\r\n        if (!BaseSound.prototype.play.call(this, markerName, config))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = true, isPaused = false \\/\\/\\/\r\n        this.stopAndRemoveBufferSource();\r\n        this.createAndStartBufferSource();\r\n\r\n        this.emit(Events.PLAY, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Pauses the sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#pause\r\n     * @fires Phaser.Sound.Events#PAUSE\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was paused successfully.\r\n     */\r\n    pause: function ()\r\n    {\r\n        if (this.manager.context.currentTime < this.startTime)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!BaseSound.prototype.pause.call(this))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = false, isPaused = true \\/\\/\\/\r\n        this.currentConfig.seek = this.getCurrentTime(); // Equivalent to setting paused time\r\n        this.stopAndRemoveBufferSource();\r\n\r\n        this.emit(Events.PAUSE, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Resumes the sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#resume\r\n     * @fires Phaser.Sound.Events#RESUME\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was resumed successfully.\r\n     */\r\n    resume: function ()\r\n    {\r\n        if (this.manager.context.currentTime < this.startTime)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        if (!BaseSound.prototype.resume.call(this))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = true, isPaused = false \\/\\/\\/\r\n        this.createAndStartBufferSource();\r\n\r\n        this.emit(Events.RESUME, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Stop playing this sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#stop\r\n     * @fires Phaser.Sound.Events#STOP\r\n     * @since 3.0.0\r\n     *\r\n     * @return {boolean} Whether the sound was stopped successfully.\r\n     */\r\n    stop: function ()\r\n    {\r\n        if (!BaseSound.prototype.stop.call(this))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        //  \\/\\/\\/ isPlaying = false, isPaused = false \\/\\/\\/\r\n        this.stopAndRemoveBufferSource();\r\n\r\n        this.emit(Events.STOP, this);\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Used internally.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#createAndStartBufferSource\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    createAndStartBufferSource: function ()\r\n    {\r\n        var seek = this.currentConfig.seek;\r\n        var delay = this.currentConfig.delay;\r\n        var when = this.manager.context.currentTime + delay;\r\n        var offset = (this.currentMarker ? this.currentMarker.start : 0) + seek;\r\n        var duration = this.duration - seek;\r\n\r\n        this.playTime = when - seek;\r\n        this.startTime = when;\r\n        this.source = this.createBufferSource();\r\n\r\n        this.applyConfig();\r\n\r\n        this.source.start(Math.max(0, when), Math.max(0, offset), Math.max(0, duration));\r\n\r\n        this.resetConfig();\r\n    },\r\n\r\n    /**\r\n     * Used internally.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#createAndStartLoopBufferSource\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    createAndStartLoopBufferSource: function ()\r\n    {\r\n        var when = this.getLoopTime();\r\n        var offset = this.currentMarker ? this.currentMarker.start : 0;\r\n        var duration = this.duration;\r\n\r\n        this.loopTime = when;\r\n        this.loopSource = this.createBufferSource();\r\n        this.loopSource.playbackRate.setValueAtTime(this.totalRate, 0);\r\n        this.loopSource.start(Math.max(0, when), Math.max(0, offset), Math.max(0, duration));\r\n    },\r\n\r\n    /**\r\n     * Used internally.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#createBufferSource\r\n     * @private\r\n     * @since 3.0.0\r\n     *\r\n     * @return {AudioBufferSourceNode}\r\n     */\r\n    createBufferSource: function ()\r\n    {\r\n        var _this = this;\r\n        var source = this.manager.context.createBufferSource();\r\n\r\n        source.buffer = this.audioBuffer;\r\n\r\n        source.connect(this.muteNode);\r\n\r\n        source.onended = function (ev)\r\n        {\r\n            if (ev.target === _this.source)\r\n            {\r\n                // sound ended\r\n                if (_this.currentConfig.loop)\r\n                {\r\n                    _this.hasLooped = true;\r\n                }\r\n                else\r\n                {\r\n                    _this.hasEnded = true;\r\n                }\r\n            }\r\n\r\n            // else was stopped\r\n        };\r\n\r\n        return source;\r\n    },\r\n\r\n    /**\r\n     * Used internally.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#stopAndRemoveBufferSource\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    stopAndRemoveBufferSource: function ()\r\n    {\r\n        if (this.source)\r\n        {\r\n            this.source.stop();\r\n            this.source.disconnect();\r\n            this.source = null;\r\n        }\r\n\r\n        this.playTime = 0;\r\n        this.startTime = 0;\r\n\r\n        this.stopAndRemoveLoopBufferSource();\r\n    },\r\n\r\n    /**\r\n     * Used internally.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#stopAndRemoveLoopBufferSource\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    stopAndRemoveLoopBufferSource: function ()\r\n    {\r\n        if (this.loopSource)\r\n        {\r\n            this.loopSource.stop();\r\n            this.loopSource.disconnect();\r\n            this.loopSource = null;\r\n        }\r\n\r\n        this.loopTime = 0;\r\n    },\r\n\r\n    /**\r\n     * Method used internally for applying config values to some of the sound properties.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#applyConfig\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    applyConfig: function ()\r\n    {\r\n        this.rateUpdates.length = 0;\r\n\r\n        this.rateUpdates.push({\r\n            time: 0,\r\n            rate: 1\r\n        });\r\n\r\n        BaseSound.prototype.applyConfig.call(this);\r\n    },\r\n\r\n    /**\r\n     * Update method called automatically by sound manager on every game step.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#update\r\n     * @fires Phaser.Sound.Events#COMPLETE\r\n     * @fires Phaser.Sound.Events#LOOPED\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    update: function ()\r\n    {\r\n        if (this.hasEnded)\r\n        {\r\n            this.hasEnded = false;\r\n\r\n            BaseSound.prototype.stop.call(this);\r\n\r\n            this.stopAndRemoveBufferSource();\r\n\r\n            this.emit(Events.COMPLETE, this);\r\n        }\r\n        else if (this.hasLooped)\r\n        {\r\n            this.hasLooped = false;\r\n            this.source = this.loopSource;\r\n            this.loopSource = null;\r\n            this.playTime = this.startTime = this.loopTime;\r\n            this.rateUpdates.length = 0;\r\n\r\n            this.rateUpdates.push({\r\n                time: 0,\r\n                rate: this.totalRate\r\n            });\r\n\r\n            this.createAndStartLoopBufferSource();\r\n\r\n            this.emit(Events.LOOPED, this);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Calls Phaser.Sound.BaseSound#destroy method\r\n     * and cleans up all Web Audio API related stuff.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#destroy\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        BaseSound.prototype.destroy.call(this);\r\n\r\n        this.audioBuffer = null;\r\n        this.stopAndRemoveBufferSource();\r\n        this.muteNode.disconnect();\r\n        this.muteNode = null;\r\n        this.volumeNode.disconnect();\r\n        this.volumeNode = null;\r\n\r\n        if (this.pannerNode)\r\n        {\r\n            this.pannerNode.disconnect();\r\n            this.pannerNode = null;\r\n        }\r\n\r\n        this.rateUpdates.length = 0;\r\n        this.rateUpdates = null;\r\n    },\r\n\r\n    /**\r\n     * Method used internally to calculate total playback rate of the sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#calculateRate\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    calculateRate: function ()\r\n    {\r\n        BaseSound.prototype.calculateRate.call(this);\r\n\r\n        var now = this.manager.context.currentTime;\r\n\r\n        if (this.source && typeof this.totalRate === 'number')\r\n        {\r\n            this.source.playbackRate.setValueAtTime(this.totalRate, now);\r\n        }\r\n\r\n        if (this.isPlaying)\r\n        {\r\n            this.rateUpdates.push({\r\n                time: Math.max(this.startTime, now) - this.playTime,\r\n                rate: this.totalRate\r\n            });\r\n\r\n            if (this.loopSource)\r\n            {\r\n                this.stopAndRemoveLoopBufferSource();\r\n                this.createAndStartLoopBufferSource();\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally for calculating current playback time of a playing sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#getCurrentTime\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    getCurrentTime: function ()\r\n    {\r\n        var currentTime = 0;\r\n\r\n        for (var i = 0; i < this.rateUpdates.length; i++)\r\n        {\r\n            var nextTime = 0;\r\n\r\n            if (i < this.rateUpdates.length - 1)\r\n            {\r\n                nextTime = this.rateUpdates[i + 1].time;\r\n            }\r\n            else\r\n            {\r\n                nextTime = this.manager.context.currentTime - this.playTime;\r\n            }\r\n\r\n            currentTime += (nextTime - this.rateUpdates[i].time) * this.rateUpdates[i].rate;\r\n        }\r\n\r\n        return currentTime;\r\n    },\r\n\r\n    /**\r\n     * Method used internally for calculating the time\r\n     * at witch the loop source should start playing.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#getLoopTime\r\n     * @private\r\n     * @since 3.0.0\r\n     */\r\n    getLoopTime: function ()\r\n    {\r\n        var lastRateUpdateCurrentTime = 0;\r\n\r\n        for (var i = 0; i < this.rateUpdates.length - 1; i++)\r\n        {\r\n            lastRateUpdateCurrentTime += (this.rateUpdates[i + 1].time - this.rateUpdates[i].time) * this.rateUpdates[i].rate;\r\n        }\r\n\r\n        var lastRateUpdate = this.rateUpdates[this.rateUpdates.length - 1];\r\n\r\n        return this.playTime + lastRateUpdate.time + (this.duration - lastRateUpdateCurrentTime) / lastRateUpdate.rate;\r\n    },\r\n\r\n    /**\r\n     * Rate at which this Sound will be played.\r\n     * Value of 1.0 plays the audio at full speed, 0.5 plays the audio at half speed\r\n     * and 2.0 doubles the audios playback speed.\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#rate\r\n     * @type {number}\r\n     * @default 1\r\n     * @fires Phaser.Sound.Events#RATE\r\n     * @since 3.0.0\r\n     */\r\n    rate: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.rate;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.rate = value;\r\n\r\n            this.calculateRate();\r\n\r\n            this.emit(Events.RATE, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the playback rate of this Sound.\r\n     *\r\n     * For example, a value of 1.0 plays the audio at full speed, 0.5 plays the audio at half speed\r\n     * and 2.0 doubles the audios playback speed.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setRate\r\n     * @fires Phaser.Sound.Events#RATE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The playback rate at of this Sound.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setRate: function (value)\r\n    {\r\n        this.rate = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * The detune value of this Sound, given in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\r\n     * The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#detune\r\n     * @type {number}\r\n     * @default 0\r\n     * @fires Phaser.Sound.Events#DETUNE\r\n     * @since 3.0.0\r\n     */\r\n    detune: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.detune;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.detune = value;\r\n\r\n            this.calculateRate();\r\n\r\n            this.emit(Events.DETUNE, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the detune value of this Sound, given in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\r\n     * The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setDetune\r\n     * @fires Phaser.Sound.Events#DETUNE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The range of the value is -1200 to 1200, but we recommend setting it to [50](https://en.wikipedia.org/wiki/50_Cent).\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setDetune: function (value)\r\n    {\r\n        this.detune = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Boolean indicating whether the sound is muted or not.\r\n     * Gets or sets the muted state of this sound.\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#mute\r\n     * @type {boolean}\r\n     * @default false\r\n     * @fires Phaser.Sound.Events#MUTE\r\n     * @since 3.0.0\r\n     */\r\n    mute: {\r\n\r\n        get: function ()\r\n        {\r\n            return (this.muteNode.gain.value === 0);\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.mute = value;\r\n            this.muteNode.gain.setValueAtTime(value ? 0 : 1, 0);\r\n\r\n            this.emit(Events.MUTE, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the muted state of this Sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setMute\r\n     * @fires Phaser.Sound.Events#MUTE\r\n     * @since 3.4.0\r\n     *\r\n     * @param {boolean} value - `true` to mute this sound, `false` to unmute it.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setMute: function (value)\r\n    {\r\n        this.mute = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Gets or sets the volume of this sound, a value between 0 (silence) and 1 (full volume).\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#volume\r\n     * @type {number}\r\n     * @default 1\r\n     * @fires Phaser.Sound.Events#VOLUME\r\n     * @since 3.0.0\r\n     */\r\n    volume: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.volumeNode.gain.value;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.volume = value;\r\n            this.volumeNode.gain.setValueAtTime(value, 0);\r\n\r\n            this.emit(Events.VOLUME, this, value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the volume of this Sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setVolume\r\n     * @fires Phaser.Sound.Events#VOLUME\r\n     * @since 3.4.0\r\n     *\r\n     * @param {number} value - The volume of the sound.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setVolume: function (value)\r\n    {\r\n        this.volume = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Property representing the position of playback for this sound, in seconds.\r\n     * Setting it to a specific value moves current playback to that position.\r\n     * The value given is clamped to the range 0 to current marker duration.\r\n     * Setting seek of a stopped sound has no effect.\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#seek\r\n     * @type {number}\r\n     * @fires Phaser.Sound.Events#SEEK\r\n     * @since 3.0.0\r\n     */\r\n    seek: {\r\n\r\n        get: function ()\r\n        {\r\n            if (this.isPlaying)\r\n            {\r\n                if (this.manager.context.currentTime < this.startTime)\r\n                {\r\n                    return this.startTime - this.playTime;\r\n                }\r\n\r\n                return this.getCurrentTime();\r\n            }\r\n            else if (this.isPaused)\r\n            {\r\n                return this.currentConfig.seek;\r\n            }\r\n            else\r\n            {\r\n                return 0;\r\n            }\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            if (this.manager.context.currentTime < this.startTime)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if (this.isPlaying || this.isPaused)\r\n            {\r\n                value = Math.min(Math.max(0, value), this.duration);\r\n\r\n                this.currentConfig.seek = value;\r\n\r\n                if (this.isPlaying)\r\n                {\r\n                    this.stopAndRemoveBufferSource();\r\n                    this.createAndStartBufferSource();\r\n                }\r\n\r\n                this.emit(Events.SEEK, this, value);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Seeks to a specific point in this sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setSeek\r\n     * @fires Phaser.Sound.Events#SEEK\r\n     * @since 3.4.0\r\n     *\r\n     * @param {number} value - The point in the sound to seek to.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setSeek: function (value)\r\n    {\r\n        this.seek = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Flag indicating whether or not the sound or current sound marker will loop.\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#loop\r\n     * @type {boolean}\r\n     * @default false\r\n     * @fires Phaser.Sound.Events#LOOP\r\n     * @since 3.0.0\r\n     */\r\n    loop: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.currentConfig.loop;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.loop = value;\r\n\r\n            if (this.isPlaying)\r\n            {\r\n                this.stopAndRemoveLoopBufferSource();\r\n\r\n                if (value)\r\n                {\r\n                    this.createAndStartLoopBufferSource();\r\n                }\r\n            }\r\n\r\n            this.emit(Events.LOOP, this, value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the loop state of this Sound.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setLoop\r\n     * @fires Phaser.Sound.Events#LOOP\r\n     * @since 3.4.0\r\n     *\r\n     * @param {boolean} value - `true` to loop this sound, `false` to not loop it.\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setLoop: function (value)\r\n    {\r\n        this.loop = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Gets or sets the pan of this sound, a value between -1 (full left pan) and 1 (full right pan).\r\n     *\r\n     * Always returns zero on iOS / Safari as it doesn't support the stereo panner node.\r\n     *\r\n     * @name Phaser.Sound.WebAudioSound#pan\r\n     * @type {number}\r\n     * @default 0\r\n     * @fires Phaser.Sound.Events#PAN\r\n     * @since 3.50.0\r\n     */\r\n    pan: {\r\n\r\n        get: function ()\r\n        {\r\n            if (this.pannerNode)\r\n            {\r\n                return this.pannerNode.pan.value;\r\n            }\r\n            else\r\n            {\r\n                return 0;\r\n            }\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.currentConfig.pan = value;\r\n\r\n            if (this.pannerNode)\r\n            {\r\n                this.pannerNode.pan.setValueAtTime(value, this.manager.context.currentTime);\r\n            }\r\n\r\n            this.emit(Events.PAN, this, value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the pan of this sound, a value between -1 (full left pan) and 1 (full right pan).\r\n     *\r\n     * Note: iOS / Safari doesn't support the stereo panner node.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSound#setPan\r\n     * @fires Phaser.Sound.Events#PAN\r\n     * @since 3.50.0\r\n     *\r\n     * @param {number} value - The pan of the sound. A value between -1 (full left pan) and 1 (full right pan).\r\n     *\r\n     * @return {this} This Sound instance.\r\n     */\r\n    setPan: function (value)\r\n    {\r\n        this.pan = value;\r\n\r\n        return this;\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = WebAudioSound;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar Base64ToArrayBuffer = require('../../utils/base64/Base64ToArrayBuffer');\r\nvar BaseSoundManager = require('../BaseSoundManager');\r\nvar Class = require('../../utils/Class');\r\nvar Events = require('../events');\r\nvar GameEvents = require('../../core/events');\r\nvar WebAudioSound = require('./WebAudioSound');\r\n\r\n/**\r\n * @classdesc\r\n * Web Audio API implementation of the Sound Manager.\r\n *\r\n * Not all browsers can play all audio formats.\r\n *\r\n * There is a good guide to what's supported: [Cross-browser audio basics: Audio codec support](https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/Cross-browser_audio_basics#Audio_Codec_Support).\r\n *\r\n * @class WebAudioSoundManager\r\n * @extends Phaser.Sound.BaseSoundManager\r\n * @memberof Phaser.Sound\r\n * @constructor\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.Game} game - Reference to the current game instance.\r\n */\r\nvar WebAudioSoundManager = new Class({\r\n\r\n    Extends: BaseSoundManager,\r\n\r\n    initialize:\r\n\r\n    function WebAudioSoundManager (game)\r\n    {\r\n        /**\r\n         * The AudioContext being used for playback.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSoundManager#context\r\n         * @type {AudioContext}\r\n         * @since 3.0.0\r\n         */\r\n        this.context = this.createAudioContext(game);\r\n\r\n        /**\r\n         * Gain node responsible for controlling global muting.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSoundManager#masterMuteNode\r\n         * @type {GainNode}\r\n         * @since 3.0.0\r\n         */\r\n        this.masterMuteNode = this.context.createGain();\r\n\r\n        /**\r\n         * Gain node responsible for controlling global volume.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSoundManager#masterVolumeNode\r\n         * @type {GainNode}\r\n         * @since 3.0.0\r\n         */\r\n        this.masterVolumeNode = this.context.createGain();\r\n\r\n        this.masterMuteNode.connect(this.masterVolumeNode);\r\n\r\n        this.masterVolumeNode.connect(this.context.destination);\r\n\r\n        /**\r\n         * Destination node for connecting individual sounds to.\r\n         *\r\n         * @name Phaser.Sound.WebAudioSoundManager#destination\r\n         * @type {AudioNode}\r\n         * @since 3.0.0\r\n         */\r\n        this.destination = this.masterMuteNode;\r\n\r\n        this.locked = this.context.state === 'suspended' && ('ontouchstart' in window || 'onclick' in window);\r\n\r\n        BaseSoundManager.call(this, game);\r\n\r\n        if (this.locked && game.isBooted)\r\n        {\r\n            this.unlock();\r\n        }\r\n        else\r\n        {\r\n            game.events.once(GameEvents.BOOT, this.unlock, this);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method responsible for instantiating and returning AudioContext instance.\r\n     * If an instance of an AudioContext class was provided through the game config,\r\n     * that instance will be returned instead. This can come in handy if you are reloading\r\n     * a Phaser game on a page that never properly refreshes (such as in an SPA project)\r\n     * and you want to reuse already instantiated AudioContext.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#createAudioContext\r\n     * @since 3.0.0\r\n     *\r\n     * @param {Phaser.Game} game - Reference to the current game instance.\r\n     *\r\n     * @return {AudioContext} The AudioContext instance to be used for playback.\r\n     */\r\n    createAudioContext: function (game)\r\n    {\r\n        var audioConfig = game.config.audio;\r\n\r\n        if (audioConfig.context)\r\n        {\r\n            audioConfig.context.resume();\r\n\r\n            return audioConfig.context;\r\n        }\r\n\r\n        if (window.hasOwnProperty('AudioContext'))\r\n        {\r\n            return new AudioContext();\r\n        }\r\n        else if (window.hasOwnProperty('webkitAudioContext'))\r\n        {\r\n            return new window.webkitAudioContext();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * This method takes a new AudioContext reference and then sets\r\n     * this Sound Manager to use that context for all playback.\r\n     *\r\n     * As part of this call it also disconnects the master mute and volume\r\n     * nodes and then re-creates them on the new given context.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#setAudioContext\r\n     * @since 3.21.0\r\n     *\r\n     * @param {AudioContext} context - Reference to an already created AudioContext instance.\r\n     *\r\n     * @return {this} The WebAudioSoundManager instance.\r\n     */\r\n    setAudioContext: function (context)\r\n    {\r\n        if (this.context)\r\n        {\r\n            this.context.close();\r\n        }\r\n\r\n        if (this.masterMuteNode)\r\n        {\r\n            this.masterMuteNode.disconnect();\r\n        }\r\n\r\n        if (this.masterVolumeNode)\r\n        {\r\n            this.masterVolumeNode.disconnect();\r\n        }\r\n\r\n        this.context = context;\r\n\r\n        this.masterMuteNode = context.createGain();\r\n        this.masterVolumeNode = context.createGain();\r\n\r\n        this.masterMuteNode.connect(this.masterVolumeNode);\r\n        this.masterVolumeNode.connect(context.destination);\r\n\r\n        this.destination = this.masterMuteNode;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Adds a new sound into the sound manager.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#add\r\n     * @since 3.0.0\r\n     *\r\n     * @param {string} key - Asset key for the sound.\r\n     * @param {Phaser.Types.Sound.SoundConfig} [config] - An optional config object containing default sound settings.\r\n     *\r\n     * @return {Phaser.Sound.WebAudioSound} The new sound instance.\r\n     */\r\n    add: function (key, config)\r\n    {\r\n        var sound = new WebAudioSound(this, key, config);\r\n\r\n        this.sounds.push(sound);\r\n\r\n        return sound;\r\n    },\r\n\r\n    /**\r\n     * Decode audio data into a format ready for playback via Web Audio.\r\n     *\r\n     * The audio data can be a base64 encoded string, an audio media-type data uri, or an ArrayBuffer instance.\r\n     *\r\n     * The `audioKey` is the key that will be used to save the decoded audio to the audio cache.\r\n     *\r\n     * Instead of passing a single entry you can instead pass an array of `Phaser.Types.Sound.DecodeAudioConfig`\r\n     * objects as the first and only argument.\r\n     *\r\n     * Decoding is an async process, so be sure to listen for the events to know when decoding has completed.\r\n     *\r\n     * Once the audio has decoded it can be added to the Sound Manager or played via its key.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#decodeAudio\r\n     * @fires Phaser.Sound.Events#DECODED\r\n     * @fires Phaser.Sound.Events#DECODED_ALL\r\n     * @since 3.18.0\r\n     *\r\n     * @param {(Phaser.Types.Sound.DecodeAudioConfig[]|string)} [audioKey] - The string-based key to be used to reference the decoded audio in the audio cache, or an array of audio config objects.\r\n     * @param {(ArrayBuffer|string)} [audioData] - The audio data, either a base64 encoded string, an audio media-type data uri, or an ArrayBuffer instance.\r\n     */\r\n    decodeAudio: function (audioKey, audioData)\r\n    {\r\n        var audioFiles;\r\n\r\n        if (!Array.isArray(audioKey))\r\n        {\r\n            audioFiles = [ { key: audioKey, data: audioData } ];\r\n        }\r\n        else\r\n        {\r\n            audioFiles = audioKey;\r\n        }\r\n\r\n        var cache = this.game.cache.audio;\r\n        var remaining = audioFiles.length;\r\n\r\n        for (var i = 0; i < audioFiles.length; i++)\r\n        {\r\n            var entry = audioFiles[i];\r\n\r\n            var key = entry.key;\r\n            var data = entry.data;\r\n\r\n            if (typeof data === 'string')\r\n            {\r\n                data = Base64ToArrayBuffer(data);\r\n            }\r\n\r\n            var success = function (key, audioBuffer)\r\n            {\r\n                cache.add(key, audioBuffer);\r\n\r\n                this.emit(Events.DECODED, key);\r\n\r\n                remaining--;\r\n\r\n                if (remaining === 0)\r\n                {\r\n                    this.emit(Events.DECODED_ALL);\r\n                }\r\n            }.bind(this, key);\r\n\r\n            var failure = function (key, error)\r\n            {\r\n                //  eslint-disable-next-line no-console\r\n                console.error('Error decoding audio: ' + key + ' - ', error ? error.message : '');\r\n\r\n                remaining--;\r\n\r\n                if (remaining === 0)\r\n                {\r\n                    this.emit(Events.DECODED_ALL);\r\n                }\r\n            }.bind(this, key);\r\n\r\n            this.context.decodeAudioData(data, success, failure);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Unlocks Web Audio API on the initial input event.\r\n     *\r\n     * Read more about how this issue is handled here in [this article](https://medium.com/@pgoloskokovic/unlocking-web-audio-the-smarter-way-8858218c0e09).\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#unlock\r\n     * @since 3.0.0\r\n     */\r\n    unlock: function ()\r\n    {\r\n        var _this = this;\r\n\r\n        var body = document.body;\r\n\r\n        var unlockHandler = function unlockHandler ()\r\n        {\r\n            if (_this.context && body)\r\n            {\r\n                var bodyRemove = body.removeEventListener;\r\n\r\n                _this.context.resume().then(function ()\r\n                {\r\n                    bodyRemove('touchstart', unlockHandler);\r\n                    bodyRemove('touchend', unlockHandler);\r\n                    bodyRemove('click', unlockHandler);\r\n                    bodyRemove('keydown', unlockHandler);\r\n\r\n                    _this.unlocked = true;\r\n                }, function ()\r\n                {\r\n                    bodyRemove('touchstart', unlockHandler);\r\n                    bodyRemove('touchend', unlockHandler);\r\n                    bodyRemove('click', unlockHandler);\r\n                    bodyRemove('keydown', unlockHandler);\r\n                });\r\n            }\r\n        };\r\n\r\n        if (body)\r\n        {\r\n            body.addEventListener('touchstart', unlockHandler, false);\r\n            body.addEventListener('touchend', unlockHandler, false);\r\n            body.addEventListener('click', unlockHandler, false);\r\n            body.addEventListener('keydown', unlockHandler, false);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally for pausing sound manager if\r\n     * Phaser.Sound.WebAudioSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#onBlur\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    onBlur: function ()\r\n    {\r\n        if (!this.locked)\r\n        {\r\n            this.context.suspend();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method used internally for resuming sound manager if\r\n     * Phaser.Sound.WebAudioSoundManager#pauseOnBlur is set to true.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#onFocus\r\n     * @protected\r\n     * @since 3.0.0\r\n     */\r\n    onFocus: function ()\r\n    {\r\n        var context = this.context;\r\n\r\n        if ((context.state === 'suspended' || context.state === 'interrupted') && !this.locked)\r\n        {\r\n            context.resume();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Update method called on every game step.\r\n     * Removes destroyed sounds and updates every active sound in the game.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#update\r\n     * @protected\r\n     * @fires Phaser.Sound.Events#UNLOCKED\r\n     * @since 3.0.0\r\n     *\r\n     * @param {number} time - The current timestamp as generated by the Request Animation Frame or SetTimeout.\r\n     * @param {number} delta - The delta time elapsed since the last frame.\r\n     */\r\n    update: function (time, delta)\r\n    {\r\n        BaseSoundManager.prototype.update.call(this, time, delta);\r\n\r\n        var context = this.context;\r\n\r\n        //  Resume interrupted audio on iOS\r\n        if (context && context.state === 'interrupted')\r\n        {\r\n            context.resume();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Calls Phaser.Sound.BaseSoundManager#destroy method\r\n     * and cleans up all Web Audio API related stuff.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#destroy\r\n     * @since 3.0.0\r\n     */\r\n    destroy: function ()\r\n    {\r\n        this.destination = null;\r\n        this.masterVolumeNode.disconnect();\r\n        this.masterVolumeNode = null;\r\n        this.masterMuteNode.disconnect();\r\n        this.masterMuteNode = null;\r\n\r\n        if (this.game.config.audio.context)\r\n        {\r\n            this.context.suspend();\r\n        }\r\n        else\r\n        {\r\n            var _this = this;\r\n\r\n            this.context.close().then(function ()\r\n            {\r\n                _this.context = null;\r\n            });\r\n        }\r\n\r\n        BaseSoundManager.prototype.destroy.call(this);\r\n    },\r\n\r\n    /**\r\n     * Sets the muted state of all this Sound Manager.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#setMute\r\n     * @fires Phaser.Sound.Events#GLOBAL_MUTE\r\n     * @since 3.3.0\r\n     *\r\n     * @param {boolean} value - `true` to mute all sounds, `false` to unmute them.\r\n     *\r\n     * @return {Phaser.Sound.WebAudioSoundManager} This Sound Manager.\r\n     */\r\n    setMute: function (value)\r\n    {\r\n        this.mute = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @name Phaser.Sound.WebAudioSoundManager#mute\r\n     * @type {boolean}\r\n     * @fires Phaser.Sound.Events#GLOBAL_MUTE\r\n     * @since 3.0.0\r\n     */\r\n    mute: {\r\n\r\n        get: function ()\r\n        {\r\n            return (this.masterMuteNode.gain.value === 0);\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.masterMuteNode.gain.setValueAtTime(value ? 0 : 1, 0);\r\n\r\n            this.emit(Events.GLOBAL_MUTE, this, value);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the volume of this Sound Manager.\r\n     *\r\n     * @method Phaser.Sound.WebAudioSoundManager#setVolume\r\n     * @fires Phaser.Sound.Events#GLOBAL_VOLUME\r\n     * @since 3.3.0\r\n     *\r\n     * @param {number} value - The global volume of this Sound Manager.\r\n     *\r\n     * @return {Phaser.Sound.WebAudioSoundManager} This Sound Manager.\r\n     */\r\n    setVolume: function (value)\r\n    {\r\n        this.volume = value;\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @name Phaser.Sound.WebAudioSoundManager#volume\r\n     * @type {number}\r\n     * @fires Phaser.Sound.Events#GLOBAL_VOLUME\r\n     * @since 3.0.0\r\n     */\r\n    volume: {\r\n\r\n        get: function ()\r\n        {\r\n            return this.masterVolumeNode.gain.value;\r\n        },\r\n\r\n        set: function (value)\r\n        {\r\n            this.masterVolumeNode.gain.setValueAtTime(value, 0);\r\n\r\n            this.emit(Events.GLOBAL_VOLUME, this, value);\r\n        }\r\n\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = WebAudioSoundManager;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar SafeRange = require('./SafeRange');\r\n\r\n/**\r\n * Returns all elements in the array.\r\n *\r\n * You can optionally specify a matching criteria using the `property` and `value` arguments.\r\n *\r\n * For example: `getAll('visible', true)` would return only elements that have their visible property set.\r\n *\r\n * Optionally you can specify a start and end index. For example if the array had 100 elements,\r\n * and you set `startIndex` to 0 and `endIndex` to 50, it would return matches from only\r\n * the first 50 elements.\r\n *\r\n * @function Phaser.Utils.Array.GetAll\r\n * @since 3.4.0\r\n *\r\n * @param {array} array - The array to search.\r\n * @param {string} [property] - The property to test on each array element.\r\n * @param {*} [value] - The value to test the property against. Must pass a strict (`===`) comparison check.\r\n * @param {number} [startIndex] - An optional start index to search from.\r\n * @param {number} [endIndex] - An optional end index to search to.\r\n *\r\n * @return {array} All matching elements from the array.\r\n */\r\nvar GetAll = function (array, property, value, startIndex, endIndex)\r\n{\r\n    if (startIndex === undefined) { startIndex = 0; }\r\n    if (endIndex === undefined) { endIndex = array.length; }\r\n\r\n    var output = [];\r\n\r\n    if (SafeRange(array, startIndex, endIndex))\r\n    {\r\n        for (var i = startIndex; i < endIndex; i++)\r\n        {\r\n            var child = array[i];\r\n\r\n            if (!property ||\r\n                (property && value === undefined && child.hasOwnProperty(property)) ||\r\n                (property && value !== undefined && child[property] === value))\r\n            {\r\n                output.push(child);\r\n            }\r\n        }\r\n    }\r\n\r\n    return output;\r\n};\r\n\r\nmodule.exports = GetAll;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar SafeRange = require('./SafeRange');\r\n\r\n/**\r\n * Returns the first element in the array.\r\n *\r\n * You can optionally specify a matching criteria using the `property` and `value` arguments.\r\n *\r\n * For example: `getAll('visible', true)` would return the first element that had its `visible` property set.\r\n *\r\n * Optionally you can specify a start and end index. For example if the array had 100 elements,\r\n * and you set `startIndex` to 0 and `endIndex` to 50, it would search only the first 50 elements.\r\n *\r\n * @function Phaser.Utils.Array.GetFirst\r\n * @since 3.4.0\r\n *\r\n * @param {array} array - The array to search.\r\n * @param {string} [property] - The property to test on each array element.\r\n * @param {*} [value] - The value to test the property against. Must pass a strict (`===`) comparison check.\r\n * @param {number} [startIndex=0] - An optional start index to search from.\r\n * @param {number} [endIndex=array.length] - An optional end index to search up to (but not included)\r\n *\r\n * @return {object} The first matching element from the array, or `null` if no element could be found in the range given.\r\n */\r\nvar GetFirst = function (array, property, value, startIndex, endIndex)\r\n{\r\n    if (startIndex === undefined) { startIndex = 0; }\r\n    if (endIndex === undefined) { endIndex = array.length; }\r\n\r\n    if (SafeRange(array, startIndex, endIndex))\r\n    {\r\n        for (var i = startIndex; i < endIndex; i++)\r\n        {\r\n            var child = array[i];\r\n\r\n            if (!property ||\r\n                (property && value === undefined && child.hasOwnProperty(property)) ||\r\n                (property && value !== undefined && child[property] === value))\r\n            {\r\n                return child;\r\n            }\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\nmodule.exports = GetFirst;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\n/**\r\n * Tests if the start and end indexes are a safe range for the given array.\r\n * \r\n * @function Phaser.Utils.Array.SafeRange\r\n * @since 3.4.0\r\n *\r\n * @param {array} array - The array to check.\r\n * @param {number} startIndex - The start index.\r\n * @param {number} endIndex - The end index.\r\n * @param {boolean} [throwError=true] - Throw an error if the range is out of bounds.\r\n *\r\n * @return {boolean} True if the range is safe, otherwise false.\r\n */\r\nvar SafeRange = function (array, startIndex, endIndex, throwError)\r\n{\r\n    var len = array.length;\r\n\r\n    if (startIndex < 0 ||\r\n        startIndex > len ||\r\n        startIndex >= endIndex ||\r\n        endIndex > len ||\r\n        startIndex + endIndex > len)\r\n    {\r\n        if (throwError)\r\n        {\r\n            throw new Error('Range Error: Values outside acceptable range');\r\n        }\r\n\r\n        return false;\r\n    }\r\n    else\r\n    {\r\n        return true;\r\n    }\r\n};\r\n\r\nmodule.exports = SafeRange;\r\n","/**\r\n * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2020 Photon Storm Ltd.\r\n * @license      {@link https://opensource.org/licenses/MIT|MIT License}\r\n */\r\n\r\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n//  Use a lookup table to find the index.\r\nvar lookup = new Uint8Array(256);\r\n\r\nfor (var i = 0; i < chars.length; i++)\r\n{\r\n    lookup[chars.charCodeAt(i)] = i;\r\n}\r\n\r\n/**\r\n * Converts a base64 string, either with or without a data uri, into an Array Buffer.\r\n *\r\n * @function Phaser.Utils.Base64.Base64ToArrayBuffer\r\n * @since 3.18.0\r\n * \r\n * @param {string} base64 - The base64 string to be decoded. Can optionally contain a data URI header, which will be stripped out prior to decoding.\r\n * \r\n * @return {ArrayBuffer} An ArrayBuffer decoded from the base64 data.\r\n */\r\nvar Base64ToArrayBuffer = function (base64)\r\n{\r\n    //  Is it a data uri? if so, strip the header away\r\n    base64 = base64.substr(base64.indexOf(',') + 1);\r\n\r\n    var len = base64.length;\r\n    var bufferLength = len * 0.75;\r\n    var p = 0;\r\n    var encoded1;\r\n    var encoded2;\r\n    var encoded3;\r\n    var encoded4;\r\n\r\n    if (base64[len - 1] === '=')\r\n    {\r\n        bufferLength--;\r\n\r\n        if (base64[len - 2] === '=')\r\n        {\r\n            bufferLength--;\r\n        }\r\n    }\r\n\r\n    var arrayBuffer = new ArrayBuffer(bufferLength);\r\n    var bytes = new Uint8Array(arrayBuffer);\r\n\r\n    for (var i = 0; i < len; i += 4)\r\n    {\r\n        encoded1 = lookup[base64.charCodeAt(i)];\r\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\r\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\r\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\r\n\r\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\r\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\r\n    }\r\n\r\n    return arrayBuffer;\r\n};\r\n\r\nmodule.exports = Base64ToArrayBuffer;\r\n"],"names":["Class","EventEmitter","Events","Extend","NOOP","BaseSound","Extends","initialize","manager","key","config","call","this","isPlaying","isPaused","totalRate","duration","totalDuration","mute","volume","rate","detune","seek","loop","delay","pan","currentConfig","markers","currentMarker","pendingRemove","addMarker","marker","name","console","error","start","updateMarker","warn","removeMarker","markerName","play","undefined","resetConfig","pause","resume","stop","applyConfig","update","calculateRate","totalDetune","detuneRate","Math","pow","destroy","emit","DESTROY","removeAllListeners","module","exports","Clone","GameEvents","GetAll","GetFirst","BaseSoundManager","game","jsonCache","cache","json","sounds","pauseOnBlur","_rate","_detune","locked","unlocked","events","on","BLUR","onGameBlur","FOCUS","onGameFocus","PRE_STEP","once","add","addAudioSprite","sound","spritemap","get","hasOwnProperty","markerConfig","end","getAll","extra","COMPLETE","playAudioSprite","spriteName","remove","index","indexOf","splice","removeAll","forEach","length","removeByKey","removed","i","pauseAll","forEachActiveSound","PAUSE_ALL","resumeAll","RESUME_ALL","stopAll","STOP_ALL","stopByKey","stopped","unlock","onBlur","onFocus","time","delta","UNLOCKED","off","callback","scope","_this","setRate","value","set","GLOBAL_RATE","setDetune","GLOBAL_DETUNE","HTML5AudioSoundManager","NoAudioSoundManager","WebAudioSoundManager","SoundManagerCreator","create","audioConfig","audio","deviceAudio","device","noAudio","webAudio","audioData","disableWebAudio","Clamp","HTML5AudioSound","tags","Error","startTime","previousTime","isLocked","prototype","pickAndPlayAudioTag","PLAY","currentTime","stopAndReleaseAudioTag","PAUSE","RESUME","STOP","pickAudioTag","reset","offset","paused","playCatchPromise","window","performance","now","dataset","used","override","otherSounds","push","sort","a1","a2","selectedSound","playPromise","catch","reason","max","audioPlayDelay","endTime","loopEndOffset","LOOPED","updateMute","muted","updateVolume","playbackRate","MUTE","setMute","VOLUME","setVolume","RATE","DETUNE","min","SEEK","setSeek","LOOP","setLoop","PAN","setPan","onBlurPausedSounds","lockedActionsQueue","_mute","_volume","entries","each","moved","detectMove","document","body","removeEventListener","lockedTags","tag","lastTag","oncanplaythrough","load","lockedAction","shift","prop","apply","addEventListener","GLOBAL_MUTE","GLOBAL_VOLUME","returnFalse","returnThis","NoAudioSound","callbackfn","WebAudioSound","audioBuffer","source","loopSource","muteNode","context","createGain","volumeNode","pannerNode","playTime","loopTime","rateUpdates","hasEnded","hasLooped","connect","createStereoPanner","destination","stopAndRemoveBufferSource","createAndStartBufferSource","getCurrentTime","when","createBufferSource","createAndStartLoopBufferSource","getLoopTime","setValueAtTime","buffer","onended","ev","target","disconnect","stopAndRemoveLoopBufferSource","lastRateUpdateCurrentTime","lastRateUpdate","gain","Base64ToArrayBuffer","createAudioContext","masterMuteNode","masterVolumeNode","state","isBooted","BOOT","AudioContext","webkitAudioContext","setAudioContext","close","decodeAudio","audioKey","audioFiles","Array","isArray","data","remaining","entry","success","DECODED","DECODED_ALL","bind","failure","message","decodeAudioData","unlockHandler","bodyRemove","then","suspend","SafeRange","array","property","startIndex","endIndex","output","child","throwError","len","chars","lookup","Uint8Array","charCodeAt","base64","encoded1","encoded2","encoded3","encoded4","substr","bufferLength","p","arrayBuffer","ArrayBuffer","bytes"],"sourceRoot":""}